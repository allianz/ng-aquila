import{f as ne}from"./chunk-QPMQUZ3Q.js";import{c as oe,g as O}from"./chunk-QN3CMUFT.js";import{b as J,c as K,r as te}from"./chunk-BKAJG54O.js";import{s as ee}from"./chunk-BPL6OUEL.js";import{g as Z,m as $,o as U,p as G}from"./chunk-Y4U5QSQA.js";import{a as X}from"./chunk-3R2XMLRC.js";import{z as q}from"./chunk-YXSCZMUH.js";import{Ab as F,Ac as V,Bc as Y,Cb as N,Gb as T,Ic as P,L as E,Qb as j,Ra as W,Rb as Q,S,Tb as k,Ub as x,Xb as L,ac as c,bc as d,ca as v,cd as b,ea as a,ha as D,lc as A,n as p,na as B,oc as y,pc as u,qb as C,tc as m,u as z,ub as f,uc as H,vb as l,vc as h,w as R,wc as g,xa as w,ya as I}from"./chunk-OQCNQT64.js";var ie=["popover"],se=[[["nx-dropdown"]],[["","nxError",""]],[["","nxInput",""]]],ae=["nx-dropdown","[nxError]","[nxInput]"];function le(s,o){s&1&&(c(0,"div",2),u(1,2),d())}var de=["*"],M=(()=>{let o=class o{constructor(e,n,t,i,r,_){this.elementRef=e,this._cdr=n,this._renderer=t,this._overlay=i,this._viewContainerRef=r,this._overlayPositionBuilder=_,this.inputChanges=new p,this._hasErrors=!1,this.currentTextWidth=0,this.size="regular",this.label="",this.describedBy="",this._destroyed=new p}ngOnInit(){this.setupErrorPopover()}ngAfterContentInit(){this._validateControlChild(),this._control.stateChanges.pipe(v(null),a(this._destroyed)).subscribe(()=>{this._hasErrors=this._control.errorState,this.updateErrorPopoverState(),this._cdr.markForCheck()}),this._control.ngControl?this._control.ngControl.valueChanges.pipe(a(this._destroyed)).subscribe(e=>{this.updateCurrentTextWidth(),this.inputChanges.next()}):this._control.stateChanges.pipe(a(this._destroyed)).subscribe(e=>{this.updateCurrentTextWidth(),this.inputChanges.next()}),this._errorChildren.changes.pipe(v(null),z(R),a(this._destroyed)).subscribe(()=>{this._syncDescribedByIds(),this._cdr.markForCheck(),this.updateErrorPopoverState()})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._overlayRef&&this._overlayRef.dispose()}updateCurrentTextWidth(){this.measureCanvas||(this.measureCanvas=this._renderer.createElement("canvas"));let e=this.measureCanvas.getContext("2d");if(!e)return;let n=this._control.elementRef,t=window.getComputedStyle(n.nativeElement);e.font=ee(t);let r=e.measureText(this._control.value).width+parseInt(t.paddingRight,10)+parseInt(t.paddingLeft,10)+1,re=this.elementRef.nativeElement.parentElement.getBoundingClientRect();this.currentTextWidth=Math.max(parseInt(t.minWidth,10),r),this.currentTextWidth=Math.min(this.currentTextWidth,re.width),this._overlayRef.hasAttached()&&this._overlayState.positionStrategy.apply()}repositionError(){this._overlayRef.hasAttached()&&this._overlayState.positionStrategy.apply()}_validateControlChild(){if(!this._control)throw new Error("NxWordComponent requires an NxFormfieldControl compatible input.")}getConnectedOverlayOrigin(){return this.elementRef}get isFocused(){return this._control.focused}get isFilled(){return!this._control.empty}get hasDropdown(){return!!this._dropdown}updateErrorPopoverState(){this._hasErrors&&this._errorChildren.length>0?this.showPopover():this.hidePopover()}setupErrorPopover(){this._popover.triggerType="manual",this._popover.tabIndex=null;let e=this._overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withLockedPosition(!0).withFlexibleDimensions(!1).withPush(!0).withPositions([{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"},{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"}]).withDefaultOffsetY(-8);this._overlayState=new $,this._overlayState.positionStrategy=e,this._overlayState.scrollStrategy=this._overlay.scrollStrategies.reposition(),this._overlayRef=this._overlay.create(this._overlayState),this._overlayState.positionStrategy.positionChanges.pipe(a(this._destroyed)).subscribe(n=>{let t=n.connectionPair;this.positionArrow(t),this._embeddedViewRef&&!this._embeddedViewRef.destroyed&&this._embeddedViewRef.detectChanges()})}positionArrow(e){let n=this.elementRef.nativeElement.getBoundingClientRect().left,t=this.elementRef.nativeElement.getBoundingClientRect().width/2,i=this._overlayRef.overlayElement.parentElement.offsetLeft,r=this._overlayRef.overlayElement.offsetLeft,_=n+t-(i+r);e.originY==="top"&&e.overlayY==="bottom"?this._popover.direction="top":this._popover.direction="bottom",this._popover.arrowStyle={left:_+"px"}}showPopover(){if(!this._overlayRef.hasAttached()){let e=new Z(this._popover.templateRef,this._viewContainerRef);this._embeddedViewRef=this._overlayRef.attach(e)}}hidePopover(){this._overlayRef.detach()}_syncDescribedByIds(){let e=this.describedBy.length>0?[this.describedBy]:[];e=[...this._errorChildren.map(n=>n.id),...e],this._control.setDescribedByIds(e)}};o.\u0275fac=function(n){return new(n||o)(l(W),l(b),l(F),l(G),l(T),l(U))},o.\u0275cmp=w({type:o,selectors:[["nx-word"]],contentQueries:function(n,t,i){if(n&1&&(m(i,K,5),m(i,ne,5),m(i,J,4)),n&2){let r;h(r=g())&&(t._control=r.first),h(r=g())&&(t._dropdown=r.first),h(r=g())&&(t._errorChildren=r)}},viewQuery:function(n,t){if(n&1&&H(ie,7),n&2){let i;h(i=g())&&(t._popover=i.first)}},hostVars:16,hostBindings:function(n,t){n&2&&(k("width",t.currentTextWidth,"px"),x("size-short",t.size=="short")("size-regular",t.size=="regular")("size-long",t.size=="long")("has-error",t._hasErrors)("is-focused",t.isFocused)("is-filled",t.isFilled)("has-dropdown",t.hasDropdown))},inputs:{size:"size",label:"label",describedBy:"describedBy"},standalone:!0,features:[P],ngContentSelectors:ae,decls:8,vars:3,consts:[["popover",""],[1,"cdk-visually-hidden"],[1,"nx-word__inner-wrapper"]],template:function(n,t){n&1&&(y(se),c(0,"div")(1,"label",1),V(2),d(),j(3,le,2,0,"div",2),u(4),d(),c(5,"nx-popover",null,0),u(7,1),d()),n&2&&(f(),Q("for",t._control.id),f(),Y(t.label),f(),L(t.hasDropdown?-1:3))},dependencies:[O,oe],styles:["[_nghost-%COMP%]{display:inline-block;position:relative;font-weight:400;text-align:center;-webkit-hyphens:none;hyphens:none;width:100%;margin:0 4px}[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:var(--natural-language-form-border-color)}.size-short[_nghost-%COMP%]{min-width:80px}.size-regular[_nghost-%COMP%]{min-width:152px}.size-long[_nghost-%COMP%]{min-width:360px}@media (max-width: 991px){.size-long[_nghost-%COMP%]{min-width:280px}}@media (max-width: 703px){.size-long[_nghost-%COMP%]{min-width:248px}}[_nghost-%COMP%]     .c-input{display:inline-block;text-align:inherit;font-size:inherit;line-height:inherit;background:0 0;color:inherit;border:none;outline:0;margin:0;width:100%;max-width:100%;height:auto;box-shadow:none;padding:0 8px}[_nghost-%COMP%]     .c-input.is-focused{outline:none;box-shadow:none}[_nghost-%COMP%]     .c-input.is-filled, [_nghost-%COMP%]     .c-input.is-focused{color:var(--natural-language-form-active-color);font-weight:400}[_nghost-%COMP%]     .c-input.is-disabled{cursor:not-allowed}[_nghost-%COMP%]     .c-input::-ms-clear{display:none}[_nghost-%COMP%]     nx-dropdown{position:relative;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:var(--natural-language-form-border-color)}[_nghost-%COMP%]     nx-dropdown .nx-dropdown__container{font-size:inherit;margin-bottom:-nx-spacer(4xs)}@media (max-width: 991px){[_nghost-%COMP%]     nx-dropdown .nx-dropdown__container{font-size:26px}}[_nghost-%COMP%]     nx-dropdown.is-filled, [_nghost-%COMP%]     nx-dropdown.has-focus{color:var(--natural-language-form-active-color);border-color:var(--natural-language-form-active-border-color)}[_nghost-%COMP%]     nx-dropdown.has-focus{border-bottom-width:4px}[_nghost-%COMP%]     nx-dropdown .nx-dropdown__icon{line-height:inherit}[_nghost-%COMP%]     .nx-word__input-wrapper{width:100%}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-filled[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--natural-language-form-active-border-color)}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-bottom-width:4px}.has-error[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--natural-language-form-error-border-color)}.has-error[_nghost-%COMP%]     nx-dropdown{color:var(--natural-language-form-error-color);border-color:var(--natural-language-form-error-border-color)}.has-error[_nghost-%COMP%]     .c-input.has-error{color:var(--natural-language-form-error-color)}.is-negative[_nghost-%COMP%]     .nx-dropdown, .is-negative   [_nghost-%COMP%]     .nx-dropdown, .is-negative[_nghost-%COMP%]     nx-dropdown, .is-negative   [_nghost-%COMP%]     nx-dropdown, .is-negative[_nghost-%COMP%]     nx-dropdown.is-filled, .is-negative   [_nghost-%COMP%]     nx-dropdown.is-filled{border-color:var(--negative);color:var(--negative)}.is-negative[_nghost-%COMP%]     .c-input, .is-negative   [_nghost-%COMP%]     .c-input, .is-negative[_nghost-%COMP%]     .c-input.has-error, .is-negative   [_nghost-%COMP%]     .c-input.has-error{color:var(--negative)}.is-negative[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-negative   [_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--negative)}.nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-large-line-height)}@media (max-width: 991px){.nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-small-line-height)}}.nx-natural-language-form--small[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .nx-natural-language-form--small   [_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-small-line-height)}@media screen and (forced-colors: active){.nx-word__inner-wrapper[_ngcontent-%COMP%],   nx-dropdown{border-bottom-color:buttonText!important}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-focused[_nghost-%COMP%]     nx-dropdown{border-bottom-color:highlight!important}}"],changeDetection:0});let s=o;return s})(),he="large",Oe=(()=>{let o=class o{set negative(e){this._negative=X(e)}get negative(){return this._negative}set size(e){this._size=e,this._cdr.markForCheck()}get size(){return this._size}constructor(e,n){this._cdr=e,this._ngZone=n,this._negative=!1,this._size=he,this.resizeEvent$=new p,this._destroyed=new p,this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(a(this._destroyed)).subscribe(()=>{this.updatePositionPopovers()})})}onResize(e){this.resizeEvent$.next()}ngAfterContentInit(){let e=this._words.map(t=>t.inputChanges);E(...e).pipe(a(this._destroyed)).subscribe(()=>{this.updatePositionPopovers()}),this.resizeObservable=this.resizeEvent$.pipe(D(500),S(100)),this.resizeObservable.pipe(a(this._destroyed)).subscribe(()=>this.resizeWords())}resizeWords(){this._words.forEach(e=>{e.updateCurrentTextWidth()})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}updatePositionPopovers(){this._words&&this._words.forEach(e=>{e.repositionError()})}};o.\u0275fac=function(n){return new(n||o)(l(b),l(N))},o.\u0275cmp=w({type:o,selectors:[["nx-natural-language-form"]],contentQueries:function(n,t,i){if(n&1&&m(i,M,4),n&2){let r;h(r=g())&&(t._words=r)}},hostVars:6,hostBindings:function(n,t){n&1&&A("orientationchange",function(r){return t.onResize(r)},!1,C)("resize",function(r){return t.onResize(r)},!1,C),n&2&&x("is-negative",t.negative)("nx-natural-language-form--small",t.size==="small")("nx-natural-language-form--large",t.size==="large")},inputs:{negative:[0,"negativeStyles","negative"],size:"size"},standalone:!0,features:[P],ngContentSelectors:de,decls:2,vars:0,consts:[[1,"nx-natural-language-form__wrapper"]],template:function(n,t){n&1&&(y(),c(0,"div",0),u(1),d())},styles:["[_nghost-%COMP%]{display:block;font-size:var(--natural-language-form-large-font-size);line-height:var(--natural-language-form-large-line-height);font-weight:var(--natural-language-form-large-font-weight);letter-spacing:var(--natural-language-form-large-letter-spacing);color:var(--natural-language-form-text-color);padding-top:72px;padding-bottom:80px}[_nghost-%COMP%]     .c-input{font-size:inherit;line-height:inherit}[_nghost-%COMP%]     nx-word+nx-word{margin-left:2px}[dir=rtl]   [_nghost-%COMP%]     nx-word+nx-word{margin-right:2px;margin-left:initial}.is-negative[_nghost-%COMP%]{color:var(--negative)}@media (max-width: 991px){[_nghost-%COMP%]{font-size:var(--natural-language-form-small-font-size);line-height:var(--natural-language-form-small-line-height);font-weight:var(--natural-language-form-small-font-weight);letter-spacing:var(--natural-language-form-small-letter-spacing)}}.nx-natural-language-form__wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.nx-natural-language-form__wrapper[_ngcontent-%COMP%] >   *{margin-bottom:8px}.nx-natural-language-form--small[_nghost-%COMP%]{font-size:var(--natural-language-form-small-font-size);line-height:var(--natural-language-form-small-line-height);font-weight:var(--natural-language-form-small-font-weight);letter-spacing:var(--natural-language-form-small-letter-spacing)}.nx-natural-language-form--small[_nghost-%COMP%]     .c-input{font-size:inherit;line-height:inherit}"],changeDetection:0});let s=o;return s})(),Me=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=I({type:o}),o.\u0275inj=B({imports:[q,te,O,M,M]});let s=o;return s})();export{M as a,Oe as b,Me as c};
