import{f as _e}from"./chunk-7PZWDTRC.js";import{f as ve,j as Q}from"./chunk-RNS6PXRS.js";import{g as fe}from"./chunk-T2PBPVYP.js";import{b as A,c as w}from"./chunk-E6BANPG3.js";import{b as T}from"./chunk-64BM3CZL.js";import{o as de,u as he,w as ge,x as pe}from"./chunk-ORXQNIBN.js";import{h as ce,z as ue}from"./chunk-CYCH5DGK.js";import{b as me}from"./chunk-NEM4VVWP.js";import{y as le}from"./chunk-P6JKCIKX.js";import{Ac as D,Bb as J,Bc as l,Cb as a,Cc as B,Dc as oe,Eb as K,Ec as m,Fa as U,Fc as f,Gc as p,Ha as M,I as k,Ic as I,Jb as E,Kb as ee,Kc as re,Lc as j,Nc as ie,Oc as ae,Pa as G,S as H,Xc as se,_ as V,_b as te,aa as s,bc as z,da as Y,dc as R,ha as q,id as _,ja as X,jc as u,k as d,kc as g,ld as v,mc as S,na as P,nc as N,ob as O,od as W,pd as F,rb as h,sd as L,wb as Z,xa as $,xc as ne}from"./chunk-ZUBEA7JB.js";var xe=["popover"],be=[[["nx-dropdown"]],[["","nxError",""]],[["","nxInput",""]]],Pe=["nx-dropdown","[nxError]","[nxInput]"];function Me(o,we){o&1&&(u(0,"div",2),l(1,2),g())}var Oe=["*",[["nx-error"]]],Ee=["*","nx-error"];function ze(o,we){o&1&&(S(0,"div",1),l(1,1),N())}var C=class{},y=(()=>{class o{_setAriaLabelledBy(){let t=this.control();if(typeof t._setAriaLabelledBy=="function"){let n=t.ariaLabelledBy?.();n!=null?t._setAriaLabelledBy(`${this.labelId} ${n}`):t._setAriaLabelledBy(this.labelId)}}constructor(t,n,e,r,i,c,x){this.elementRef=t,this._cdr=n,this._renderer=e,this._overlay=r,this._viewContainerRef=i,this._overlayPositionBuilder=c,this._nlfErrorWrapper=x,this.labelId=P(ce).nextId("nx-word-label"),this.inputChanges=new d,this._hasErrors=U(!1,{}),this.control=W.required(w),this._errorChildren=F(A,{}),this.currentTextWidth=0,this.size=v("regular",{}),this.label=v("",{}),this.describedByInput=v(void 0,{alias:"describedBy"}),this.describedBy=_(()=>{let Ce=this.describedByInput()===void 0&&this._nlfErrorWrapper._errorId()!==void 0?this._nlfErrorWrapper._errorId():void 0,ye=this._errorChildren()?.map(b=>b.id());return[Ce,...ye,this.describedByInput()].filter(b=>b!=null)},{}),this.describedByEffect=M(()=>{this.control().setDescribedByIds(this.describedBy())},{}),this._destroyed=new d,this._updatePopoverStateEffect=M(()=>{this._errorChildren(),this.updateErrorPopoverState()},{})}ngOnInit(){this.setupErrorPopover()}ngAfterContentInit(){this._setAriaLabelledBy(),this.control().stateChanges.pipe(V(null),s(this._destroyed)).subscribe(()=>{this._hasErrors.set(this.control().errorState),this.updateErrorPopoverState(),this._cdr.markForCheck()}),this.control().stateChanges.pipe(s(this._destroyed)).subscribe(t=>{this.updateCurrentTextWidth(),this.inputChanges.next()})}ngOnDestroy(){this._updatePopoverStateEffect.destroy(),this._destroyed.next(),this._destroyed.complete(),this._overlayRef&&this._overlayRef.dispose()}updateCurrentTextWidth(){this.measureCanvas||(this.measureCanvas=this._renderer.createElement("canvas"));let t=this.measureCanvas.getContext("2d");if(!t)return;let n=this.control().elementRef,e=window.getComputedStyle(n.nativeElement);t.font=ue(e);let i=t.measureText(n.nativeElement.value).width+parseInt(e.paddingRight,10)+parseInt(e.paddingLeft,10)+1,x=this.elementRef.nativeElement.parentElement.getBoundingClientRect();this.currentTextWidth=Math.max(parseInt(e.minWidth,10),i),this.currentTextWidth=Math.min(this.currentTextWidth,x.width),this._overlayRef?.hasAttached()&&this._overlayState.positionStrategy.apply()}repositionError(){this._overlayRef?.hasAttached()&&this._overlayState.positionStrategy.apply()}getConnectedOverlayOrigin(){return this.elementRef}get isFocused(){return this.control().focused}get isFilled(){return!this.control().empty}get hasDropdown(){return!!this._dropdown}updateErrorPopoverState(){this._hasErrors()&&this._errorChildren().length>0?this.showPopover():this.hidePopover()}setupErrorPopover(){this._popover.triggerType="manual",this._popover.tabIndex=null;let t=this._overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withLockedPosition(!0).withFlexibleDimensions(!1).withPush(!0).withPositions([{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"},{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"}]).withDefaultOffsetY(-8);this._overlayState=new he,this._overlayState.positionStrategy=t,this._overlayState.scrollStrategy=this._overlay.scrollStrategies.reposition(),this._overlayRef=this._overlay.create(this._overlayState),this._overlayState.positionStrategy.positionChanges.pipe(s(this._destroyed)).subscribe(n=>{let e=n.connectionPair;this.positionArrow(e),this._embeddedViewRef&&!this._embeddedViewRef.destroyed&&this._embeddedViewRef.detectChanges()})}positionArrow(t){if(this._overlayRef){let n=this.elementRef.nativeElement.getBoundingClientRect().left,e=this.elementRef.nativeElement.getBoundingClientRect().width/2,r=this._overlayRef.overlayElement.parentElement.offsetLeft,i=this._overlayRef.overlayElement.offsetLeft,c=n+e-(r+i);t.originY==="top"&&t.overlayY==="bottom"?this._popover.direction="top":this._popover.direction="bottom",this._popover.arrowStyle={left:c+"px"}}}showPopover(){if(!this._overlayRef?.hasAttached()){let t=new de(this._popover.templateRef,this._viewContainerRef);this._embeddedViewRef=this._overlayRef?.attach(t)}}hidePopover(){this._overlayRef?.detach()}static{this.\u0275fac=function(n){return new(n||o)(a(G),a(L),a(J),a(pe),a(K),a(ge),a(C))}}static{this.\u0275cmp=E({type:o,selectors:[["nx-word"]],contentQueries:function(n,e,r){if(n&1&&(p(r,e.control,w,5),p(r,e._errorChildren,A,4),B(r,w,5),B(r,_e,5)),n&2){I(2);let i;m(i=f())&&(e._control=i.first),m(i=f())&&(e._dropdown=i.first)}},viewQuery:function(n,e){if(n&1&&oe(xe,7),n&2){let r;m(r=f())&&(e._popover=r.first)}},hostVars:16,hostBindings:function(n,e){n&2&&(re("width",e.currentTextWidth,"px"),j("size-short",e.size()=="short")("size-regular",e.size()=="regular")("size-long",e.size()=="long")("has-error",e._hasErrors())("is-focused",e.isFocused)("is-filled",e.isFilled)("has-dropdown",e.hasDropdown))},inputs:{size:[1,"size"],label:[1,"label"],describedByInput:[1,"describedBy","describedByInput"]},ngContentSelectors:Pe,decls:8,vars:4,consts:[["popover",""],[1,"cdk-visually-hidden"],[1,"nx-word__inner-wrapper"]],template:function(n,e){n&1&&(D(be),u(0,"div")(1,"label",1),ie(2),g(),z(3,Me,2,0,"div",2),l(4),g(),u(5,"nx-popover",null,0),l(7,1),g()),n&2&&(h(),te("for",e.hasDropdown?"":e.control().id)("id",e.labelId),h(),ae(e.label()),h(),R(e.hasDropdown?-1:3))},dependencies:[Q,ve],styles:["[_nghost-%COMP%]{display:inline-block;position:relative;font-weight:400;text-align:center;hyphens:none;width:100%;margin:0 4px}[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:var(--natural-language-form-border-color)}.size-short[_nghost-%COMP%]{min-width:80px}.size-regular[_nghost-%COMP%]{min-width:152px}.size-long[_nghost-%COMP%]{min-width:360px}@media(max-width:991px){.size-long[_nghost-%COMP%]{min-width:280px}}@media(max-width:703px){.size-long[_nghost-%COMP%]{min-width:248px}}[_nghost-%COMP%]     .c-input{display:inline-block;text-align:inherit;font-size:inherit;line-height:inherit;background:0 0;color:inherit;border:none;outline:0;margin:0;width:100%;max-width:100%;height:auto;box-shadow:none;padding:0 8px}[_nghost-%COMP%]     .c-input.is-focused{outline:none;box-shadow:none}[_nghost-%COMP%]     .c-input.is-filled, [_nghost-%COMP%]     .c-input.is-focused{color:var(--natural-language-form-active-color);font-weight:400}[_nghost-%COMP%]     .c-input.is-disabled{cursor:not-allowed}[_nghost-%COMP%]     .c-input::-ms-clear{display:none}[_nghost-%COMP%]     nx-dropdown{position:relative;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:var(--natural-language-form-border-color)}[_nghost-%COMP%]     nx-dropdown .nx-dropdown__container{font-size:inherit;margin-bottom:-nx-spacer(4xs)}@media(max-width:991px){[_nghost-%COMP%]     nx-dropdown .nx-dropdown__container{font-size:26px}}[_nghost-%COMP%]     nx-dropdown.is-filled, [_nghost-%COMP%]     nx-dropdown.has-focus{color:var(--natural-language-form-active-color);border-color:var(--natural-language-form-active-border-color)}[_nghost-%COMP%]     nx-dropdown.has-focus{border-bottom-width:4px}[_nghost-%COMP%]     nx-dropdown .nx-dropdown__icon{line-height:inherit}[_nghost-%COMP%]     .nx-word__input-wrapper{width:100%}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-filled[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--natural-language-form-active-border-color)}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-bottom-width:4px}.has-error[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--natural-language-form-error-border-color)}.has-error[_nghost-%COMP%]     nx-dropdown{color:var(--natural-language-form-error-color);border-color:var(--natural-language-form-error-border-color)}.has-error[_nghost-%COMP%]     .c-input.has-error{color:var(--natural-language-form-error-color)}.is-negative[_nghost-%COMP%]     .nx-dropdown, .is-negative   [_nghost-%COMP%]     .nx-dropdown, .is-negative[_nghost-%COMP%]     nx-dropdown, .is-negative   [_nghost-%COMP%]     nx-dropdown, .is-negative[_nghost-%COMP%]     nx-dropdown.is-filled, .is-negative   [_nghost-%COMP%]     nx-dropdown.is-filled{border-color:var(--negative);color:var(--negative)}.is-negative[_nghost-%COMP%]     .c-input, .is-negative   [_nghost-%COMP%]     .c-input, .is-negative[_nghost-%COMP%]     .c-input.has-error, .is-negative   [_nghost-%COMP%]     .c-input.has-error{color:var(--negative)}.is-negative[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-negative   [_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--negative)}.nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-large-line-height)}@media(max-width:991px){.nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-small-line-height)}}.nx-natural-language-form--small[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .nx-natural-language-form--small   [_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-small-line-height)}@media screen and (forced-colors:active){.nx-word__inner-wrapper[_ngcontent-%COMP%],   nx-dropdown{border-bottom-color:buttonText!important}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-focused[_nghost-%COMP%]     nx-dropdown{border-bottom-color:highlight!important}}"],changeDetection:0})}}return o})(),Re="large",tt=(()=>{class o{set negative(t){this._negative=me(t)}get negative(){return this._negative}set size(t){this._size=t,this._cdr.markForCheck()}get size(){return this._size}constructor(t){this._cdr=t,this._negative=!1,this._injector=P($),this._size=Re,this.resizeEvent$=new d,this._errorComponent=W(T,{}),this._errorId=_(()=>this._errorComponent()?.id,{}),this._wordsComponents=F(y,{}),this.wordsErrorStates=_(()=>this._wordsComponents()?this._wordsComponents().some(n=>n._hasErrors()):!1,{}),this._destroyed=new d,Z({write:()=>{this.updatePositionPopovers()}},{injector:this._injector})}onResize(t){this.resizeEvent$.next()}ngAfterContentInit(){let t=this._wordsComponents().map(e=>e.inputChanges);k(...t).pipe(s(this._destroyed)).subscribe(()=>{this.updatePositionPopovers()}),this.resizeObservable=this.resizeEvent$.pipe(Y(500),H(100)),this.resizeObservable.pipe(s(this._destroyed)).subscribe(()=>this.resizeWords())}resizeWords(){this._wordsComponents().forEach(t=>{t.updateCurrentTextWidth()})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}updatePositionPopovers(){this._wordsComponents()&&this._wordsComponents().forEach(t=>{t.repositionError()})}static{this.\u0275fac=function(n){return new(n||o)(a(L))}}static{this.\u0275cmp=E({type:o,selectors:[["nx-natural-language-form"]],contentQueries:function(n,e,r){n&1&&(p(r,e._errorComponent,T,5),p(r,e._wordsComponents,y,4)),n&2&&I(2)},hostVars:6,hostBindings:function(n,e){n&1&&ne("orientationchange",function(i){return e.onResize(i)},O)("resize",function(i){return e.onResize(i)},O),n&2&&j("is-negative",e.negative)("nx-natural-language-form--small",e.size==="small")("nx-natural-language-form--large",e.size==="large")},inputs:{negative:[0,"negativeStyles","negative"],size:"size"},features:[se([{provide:C,useExisting:q(()=>o)}])],ngContentSelectors:Ee,decls:3,vars:1,consts:[[1,"nx-natural-language-form__wrapper"],[1,"nx-natural-language-form__error-wrapper"]],template:function(n,e){n&1&&(D(Oe),S(0,"div",0),l(1),N(),z(2,ze,2,0,"div",1)),n&2&&(h(2),R(e.wordsErrorStates()?2:-1))},styles:["[_nghost-%COMP%]{display:block;font-size:var(--natural-language-form-large-font-size);line-height:var(--natural-language-form-large-line-height);font-weight:var(--natural-language-form-large-font-weight);letter-spacing:var(--natural-language-form-large-letter-spacing);color:var(--natural-language-form-text-color);padding-top:72px;padding-bottom:80px}[_nghost-%COMP%]     .c-input{font-size:inherit;line-height:inherit}[_nghost-%COMP%]     nx-word+nx-word{margin-left:2px}[dir=rtl]   [_nghost-%COMP%]     nx-word+nx-word{margin-right:2px;margin-left:initial}.is-negative[_nghost-%COMP%]{color:var(--negative)}@media(max-width:991px){[_nghost-%COMP%]{font-size:var(--natural-language-form-small-font-size);line-height:var(--natural-language-form-small-line-height);font-weight:var(--natural-language-form-small-font-weight);letter-spacing:var(--natural-language-form-small-letter-spacing)}}.nx-natural-language-form__wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.nx-natural-language-form__wrapper[_ngcontent-%COMP%] >   *{margin-bottom:8px}.nx-natural-language-form--small[_nghost-%COMP%]{font-size:var(--natural-language-form-small-font-size);line-height:var(--natural-language-form-small-line-height);font-weight:var(--natural-language-form-small-font-weight);letter-spacing:var(--natural-language-form-small-letter-spacing)}.nx-natural-language-form--small[_nghost-%COMP%]     .c-input{font-size:inherit;line-height:inherit}.nx-natural-language-form__error-wrapper[_ngcontent-%COMP%]{margin-top:24px}"],changeDetection:0})}}return o})(),nt=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=ee({type:o})}static{this.\u0275inj=X({imports:[le,fe,Q,y,y]})}}return o})();export{y as a,tt as b,nt as c};
