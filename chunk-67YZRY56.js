import{g as ge,m as ue,p as I,s as ye}from"./chunk-SRJCRH4Z.js";import{a as _e}from"./chunk-PCAWR2BZ.js";import{c as me,e as be}from"./chunk-42NZUWZL.js";import{a as de,t as ve,x as fe}from"./chunk-6R5LQ6DD.js";import{h as he}from"./chunk-KMGCLTNG.js";import{a as m}from"./chunk-5JMKC4IX.js";import{B as pe,l as ne,o as ae,r as le,s as ce}from"./chunk-ZFTI3MAP.js";import{Aa as N,B as H,Cb as J,Eb as ee,Ia as x,Ja as w,M as D,Nb as A,Ob as R,Pb as f,Ra as $,Sa as O,Xb as C,Yb as L,Yc as Y,Zb as W,a as c,ac as te,b as M,bc as B,ea as h,g as E,gc as S,h as Q,i as q,ic as v,jc as oe,kc as ie,ma as K,n as u,na as U,oc as re,pa as V,pc as se,qc as X,rc as j,tb as y,ub as l,wb as k,xa as p,ya as Z,za as G}from"./chunk-3XU4BHLV.js";var Ie=["*"];function Te(r,t){if(r&1&&W(0,"div",6),r&2){let n=v(2);f("ngStyle",n.arrowStyle)}}function Fe(r,t){if(r&1){let n=B();C(0,"span",7),S("click",function(){x(n);let e=v(2);return w(e.emitCloseButtonClick())})("keyup",function(e){x(n);let o=v(2);return w(o._onCloseKeyup(e))})("keydown",function(e){x(n);let o=v(2);return w(o._onCloseKeydown(e))}),W(1,"nx-icon",8),L()}if(r&2){let n=v(2);R("aria-label",n._intl.closeIconLabel)}}function Me(r,t){if(r&1){let n=B();C(0,"div",0),S("click",function(e){x(n);let o=v();return w(o._onClick(e))}),C(1,"div",1),A(2,Te,1,1,"div",2)(3,Fe,2,1,"span",3),C(4,"span",4),ie(5),te(6,5),L()()()}if(r&2){let n,i=v();f("ngClass",i.classList),y(),R("tabindex",i.tabIndex),y(),f("ngIf",!i.hidePopoverArrow),y(),f("ngIf",i.showCloseButton),y(),f("id",i.id),y(2),f("ngTemplateOutlet",(n=i._lazyContent==null?null:i._lazyContent._template)!==null&&n!==void 0?n:null)}}var Ee=(()=>{let t=class t{constructor(i){this._template=i}};t.\u0275fac=function(e){return new(e||t)(l(k))},t.\u0275dir=N({type:t,selectors:[["ng-template","nxPopoverContent",""]]});let r=t;return r})(),we=(()=>{let t=class t{constructor(){this.changes=new u,this.closeIconLabel="close"}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})(),ft=(()=>{let t=class t{set tabIndex(i){this._tabIndex=i}get tabIndex(){return this.triggerType==="manual"?this._tabIndex:this.triggerType==="hover"?null:0}constructor(i,e){this._intl=i,this._cdr=e,this.closed=new O,this.closeButtonClick=new u,this.hidePopoverArrow=!1,this.showCloseButton=!1,this.triggerType="click",this._tabIndex=0,this.arrowStyle={},this._destroyed=new u}ngOnInit(){this._intl.changes.pipe(h(this._destroyed)).subscribe(()=>{this._cdr.markForCheck()})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.closed.complete()}emitCloseButtonClick(){this.closeButtonClick.next()}_onCloseKeyup(i){i&&(i.keyCode===13||i.keyCode===32)&&this.emitCloseButtonClick(),i.preventDefault()}_onCloseKeydown(i){i.keyCode===32&&i.preventDefault()}emitClosedEvent(){this.closed.emit()}get classList(){return this.direction?`nx-popover--${this.direction}`:""}_onClick(i){i.stopPropagation()}};t.\u0275fac=function(e){return new(e||t)(l(we),l(Y))},t.\u0275cmp=Z({type:t,selectors:[["nx-popover"]],contentQueries:function(e,o,s){if(e&1&&re(s,Ee,5),e&2){let a;X(a=j())&&(o._lazyContent=a.first)}},viewQuery:function(e,o){if(e&1&&se(k,5),e&2){let s;X(s=j())&&(o.templateRef=s.first)}},outputs:{closed:"closed"},exportAs:["nxPopover"],ngContentSelectors:Ie,decls:1,vars:0,consts:[["role","dialog","aria-hidden","false",1,"nx-popover",3,"click","ngClass"],[1,"nx-popover__content"],["class","nx-popover__arrow",3,"ngStyle",4,"ngIf"],["tabindex","0","role","button","class","nx-popover__close-icon",3,"click","keyup","keydown",4,"ngIf"],[3,"id"],[3,"ngTemplateOutlet"],[1,"nx-popover__arrow",3,"ngStyle"],["tabindex","0","role","button",1,"nx-popover__close-icon",3,"click","keyup","keydown"],["aria-hidden","true","name","close"]],template:function(e,o){e&1&&(oe(),A(0,Me,7,6,"ng-template"))},dependencies:[ne,ae,ce,le,me],styles:[".nx-popover[_ngcontent-%COMP%]{position:relative}.nx-popover__content[_ngcontent-%COMP%]{font-size:var(--popover-content-font-size);line-height:var(--popover-content-line-height);font-weight:var(--popover-content-font-weight);letter-spacing:var(--popover-content-letter-spacing);background-color:var(--popover-background-color);color:var(--popover-text-color);border:1px solid var(--popover-border-color);border-radius:4px;box-shadow:var(--shadow-small);padding:24px 32px;display:block}.nx-popover__content[_ngcontent-%COMP%]:has(.nx-popover__close-icon){padding:24px 48px 24px 32px}.nx-popover__content[_ngcontent-%COMP%]:focus{outline:none}.nx-popover__content[_ngcontent-%COMP%]::-moz-focus-inner{border:0}.nx-popover__close-icon[_ngcontent-%COMP%]{display:flex;position:absolute;top:16px;right:16px;cursor:pointer;font-size:var(--popover-close-icon-size);color:var(--popover-close-icon-color);border-radius:2px}[dir=rtl][_ngcontent-%COMP%]   .nx-popover__close-icon[_ngcontent-%COMP%]{right:auto;left:4px}.nx-popover__close-icon[_ngcontent-%COMP%]:focus{outline:none}.nx-popover__close-icon[_ngcontent-%COMP%]::-moz-focus-inner{border:0}@media screen and (forced-colors: active){.nx-popover__close-icon[_ngcontent-%COMP%]{color:buttonText}}.nx-popover__close-icon.cdk-keyboard-focused[_ngcontent-%COMP%]{box-shadow:var(--focus-box-shadow)}@media screen and (forced-colors: active),(forced-colors: active){.nx-popover__close-icon.cdk-keyboard-focused[_ngcontent-%COMP%]{box-shadow:0 0 0 2px background,0 0 0 6px CanvasText;outline:4px solid CanvasText;outline-offset:2px}}.nx-popover__arrow[_ngcontent-%COMP%]{width:12px;height:12px;background-color:inherit;position:absolute;transform:translate(-50%);border-top:1px solid var(--popover-border-color);border-left:1px solid var(--popover-border-color)}.nx-popover--top[_ngcontent-%COMP%]   .nx-popover__arrow[_ngcontent-%COMP%]{transform:translate(-50%) rotate(225deg);bottom:-5px;box-shadow:2px 2px 1px 1px var(--popover-background-color),-2px -2px -4px var(--shadow-small-color)}.nx-popover--right[_ngcontent-%COMP%]   .nx-popover__arrow[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(-45deg);left:-5px}.nx-popover--bottom[_ngcontent-%COMP%]   .nx-popover__arrow[_ngcontent-%COMP%]{transform:translate(-50%) rotate(45deg);top:-5px}.nx-popover--left[_ngcontent-%COMP%]   .nx-popover__arrow[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(135deg);right:-5px}"],changeDetection:0});let r=t;return r})(),De=0,T=16,Ce=new V("nx-popover-scroll-strategy");function Ve(r){return()=>r.scrollStrategies.close()}var Ne={provide:Ce,useFactory:Ve,deps:[I]},Ae=new V("popover-default-options",{providedIn:"root",factory:Le});function Le(){return{popoverWidth:void 0,popoverMaxWidth:void 0}}function z(r){return Error(`Popover direction "${r}" is invalid.`)}var _t=(()=>{var t;let n=class n{constructor(e,o,s,a,_,g,b,P,Pe,Oe,ke,Re){Q(this,t,void 0);this.overlay=e,this.elementRef=o,this.viewContainerRef=s,this.eventManager=a,this._focusTrapFactory=_,this._focusMonitor=g,this._ngZone=b,this._platform=P,this._dir=Pe,this._defaultOptions=Oe,this._defaultScrollStrategyFactory=ke,this._cdr=Re,this._overlayDestroyed=new u,this._elementFocusedBeforePopoverWasOpened=null,this._manualListeners=new Map,this._possiblePopoverDirections=["bottom","top","left","right"],this.closeOnLeftViewport=new IntersectionObserver(d=>{d.forEach(F=>{F.isIntersecting||this._ngZone.run(()=>this.overlayRef?.detach()),this.closeOnLeftViewport.disconnect()})},{threshold:.2}),this.id="nx-popover-"+De++,this.changeShow=new O,this._show=!1,this._closeable=null,this._closeOnClickOutside=!0,this._hidearrow=null,this.direction="right",this.popoverInitialVisible=!1,this.visibleChange=new O,this._modal=!1,this.trigger="click",this._destroyed=new u,this._scrollStrategyFactory=this._defaultScrollStrategyFactory,!this._platform.IOS&&!this._platform.ANDROID?this._manualListeners.set("mouseenter",()=>{this.trigger==="hover"&&(this.show=!0)}).set("mouseleave",()=>{this.trigger==="hover"&&(this.show=!1)}).set("keydown",d=>{switch(d.keyCode){case 32:d?.target?.tagName!=="BUTTON"&&d?.preventDefault(),this.handleClick();break;case 13:d?.preventDefault(),this.handleClick();break;case 9:this.trigger==="hover"&&(this.show=!this.isOpen);break;default:}}):this._manualListeners.set("touchstart",()=>{this.trigger==="hover"&&(this.show=!0)}),this._manualListeners.forEach((d,F)=>this.elementRef.nativeElement.addEventListener(F,d)),this._dir?.change.pipe(h(this._destroyed)).subscribe(this._dirChangeHandler.bind(this))}set show(e){e=m(e),this._show!==e&&(this._show=e,this._show?this.popover.templateRef?this.openPopover():setTimeout(()=>{this.openPopover()}):this.closePopover())}get show(){return this._show}set closeable(e){this._closeable=m(e),this.popover&&(this.popover.showCloseButton=this.isCloseable())}get closeable(){return this._closeable}set closeOnClickOutside(e){this._closeOnClickOutside=m(e)}get closeOnClickOutside(){return this._closeOnClickOutside}set hidePopoverArrow(e){this._hidearrow=m(e),this.popover&&(this.popover.hidePopoverArrow=this._hidearrow)}get hidePopoverArrow(){return this._hidearrow}set popoverWidth(e){this._popoverWidth=e}get popoverWidth(){return this._popoverWidth||this._defaultOptions?.popoverWidth}set popoverMaxWidthh(e){this._popoverMaxWidth=e}get popoverMaxWidth(){return this._popoverMaxWidth||this._defaultOptions?.popoverMaxWidth}set modal(e){this._modal=m(e)}get modal(){return this._modal}set scrollStrategy(e){E(this,t)!==e&&(q(this,t,e),this._scrollStrategyFactory=e?this.getScrollStrategyFactory(e):this._defaultScrollStrategyFactory,this._cdr.markForCheck())}get scrollStrategy(){return E(this,t)}ngAfterViewInit(){this._focusMonitor.monitor(this.elementRef.nativeElement,!0).pipe(h(this._destroyed)).subscribe(e=>{e==="keyboard"&&this.trigger==="hover"&&this._ngZone.run(()=>this.show=!0)}),this.popover.id=this.id,this.popover.closeButtonClick.pipe(h(this._destroyed)).subscribe(()=>{this.show=!1}),(this.popoverInitialVisible||this._show)&&(this.show=!0)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.show=!1,this._focusMonitor.stopMonitoring(this.elementRef.nativeElement),this._manualListeners.forEach((e,o)=>{this.elementRef.nativeElement.removeEventListener(o,e)}),this.overlayRef&&this.overlayRef.dispose(),this._manualListeners.clear(),this._overlayDestroyed.next(),this._overlayDestroyed.complete()}get isOpen(){return this.overlayRef&&this.createOverlay().hasAttached()}isCloseable(){return this.trigger==="click"&&this._closeable===null||!!this._closeable&&this.trigger!=="hover"}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}handleClick(){this.trigger==="click"?this.show=!this.isOpen:this.trigger==="hover"&&(this.show=!0)}open(){this.show=!0}close(){this.show=!1}toggle(){this.show=!this.show}openPopover(){if(!this.createOverlay().hasAttached()&&(this.setPopoverProperties(),this._embeddedViewRef=this.createOverlay().attach(this.portal),this.trigger!=="hover")){let e=this.getPopoverContainer();this._focusTrap=this._focusTrapFactory.create(e),this._elementFocusedBeforePopoverWasOpened=this.elementRef.nativeElement,this._focusMonitor.monitor(e.querySelector(".nx-popover__content"));let o=e.querySelector(".nx-popover__close-icon");o&&this._focusMonitor.monitor(o),setTimeout(()=>{this._autoFocusFirstTabbableElement(e)}),this.closeOnClickOutside&&this.waitForClose()}}setPopoverProperties(){this.popover.triggerType=this.trigger,this.popover.showCloseButton=this.isCloseable()}_autoFocusFirstTabbableElement(e){this._focusTrap.focusInitialElementWhenReady().then(o=>{o||e.focus()})}closePopover(){if(this.overlayRef.hasAttached()){if(this.trigger!=="hover"){let e=this.getPopoverContainer();this._focusMonitor.stopMonitoring(e.querySelector(".nx-popover__content")),this._focusMonitor.stopMonitoring(e.querySelector(".nx-popover__close-icon")),setTimeout(()=>{this._returnFocusAfterPopover()})}this.overlayRef.detach(),this._embeddedViewRef=null,this._focusTrap&&this._focusTrap.destroy()}}getScrollStrategyFactory(e){switch(e){case"reposition":return this.overlay.scrollStrategies.reposition;default:return this.overlay.scrollStrategies.close}}createOverlay(){if(!this.overlayRef){this.portal=new ge(this.popover.templateRef,this.viewContainerRef);let e=new ue;e.width=this.popoverWidth,e.maxWidth=this.popoverMaxWidth,e.positionStrategy=this.getPosition(),this._positionStrategy=e.positionStrategy,e.scrollStrategy=this._scrollStrategyFactory(),e.scrollStrategy.enable(),e.direction=this._dir?.value||"ltr",this._modal&&(e.hasBackdrop=!0),this.overlayRef=this.overlay.create(e),this.subscribeToPositions(e.positionStrategy),this._subscribeToAttach(),this._subscribeToDetach(),this._subscribeToKeypress(),this._modal&&this._closeOnClickOutside&&this._subscribeToBackdropClick()}return this.overlayRef}subscribeToPositions(e){e.positionChanges.pipe(h(this._overlayDestroyed)).subscribe(o=>{let s=o.connectionPair;this.positionOverlay(s),this.positionArrow(s),this.closeOnLeftViewport.observe(this.elementRef.nativeElement),this._embeddedViewRef&&!this._embeddedViewRef.destroyed&&this._embeddedViewRef.detectChanges()})}_subscribeToBackdropClick(){this.overlayRef.backdropClick().pipe(h(this._overlayDestroyed)).subscribe(e=>{this.show=!1})}_subscribeToDetach(){this.overlayRef.detachments().pipe(h(this._overlayDestroyed)).subscribe(e=>{this.show&&(this.show=!1),this.changeShow.emit(this._show),this.popover.emitClosedEvent()})}_subscribeToAttach(){this.overlayRef.attachments().pipe(h(this._overlayDestroyed)).subscribe(e=>{this.changeShow.emit(this._show)})}_subscribeToKeypress(){this.overlayRef.keydownEvents().pipe(D(e=>e.keyCode===27),h(this._overlayDestroyed)).subscribe(e=>{this.isOpen&&(this.show=!1)})}waitForClose(){return this.overlayRef.outsidePointerEvents().pipe(H(e=>e.target),D(e=>!this.elementRef.nativeElement.contains(e)),h(this.popover.closed)).subscribe(()=>{this.show=!1})}positionOverlay(e){e.originX==="end"&&e.overlayX==="start"?this.popover.direction=this.isRtl?"left":"right":e.originY==="bottom"&&e.overlayY==="top"?this.popover.direction="bottom":e.originX==="start"&&e.overlayX==="end"?this.popover.direction=this.isRtl?"right":"left":e.originY==="top"&&e.overlayY==="bottom"&&(this.popover.direction="top")}positionArrow(e){let o=this.elementRef.nativeElement.getBoundingClientRect().left,s=this.elementRef.nativeElement.getBoundingClientRect().width/2,a=this.overlayRef.overlayElement.parentElement.offsetLeft,_=this.overlayRef.overlayElement.offsetLeft,g=o+s-(a+_);if(e.originX===e.overlayX){let b="left",P={left:"0"};P[b]=g+"px",this.popover.arrowStyle=P}(e.originY==="bottom"||e.originY==="top")&&e.overlayX==="center"&&(this.popover.arrowStyle={left:g+"px"}),(e.originX==="end"||e.originX==="start")&&e.overlayY==="center"&&(this.popover.arrowStyle={top:"50%"})}getPosition(){let e=this._getOrigin(this.direction),o=this._getOverlayPosition(this.direction),s=this._getOffset(this.direction),a=this._getFallbackPositions(this.direction);return this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([c(c(c({},e),o),s),...a]).withFlexibleDimensions(!1)}_returnFocusAfterPopover(){let e=this._elementFocusedBeforePopoverWasOpened;e&&typeof e.focus=="function"&&e.focus()}getPopoverContainer(){return this.overlayRef.overlayElement.querySelector(".nx-popover")}_getOrigin(e){switch(e){case"top":case"bottom":return{originX:"center",originY:e};case"left":return{originX:this.isRtl?"end":"start",originY:"center"};case"right":return{originX:this.isRtl?"start":"end",originY:"center"};default:throw z(e)}}_getOverlayPosition(e){switch(e){case"top":case"bottom":return{overlayX:"center",overlayY:this._getInversePosition(e)};case"left":return{overlayX:this.isRtl?"start":"end",overlayY:"center"};case"right":return{overlayX:this.isRtl?"end":"start",overlayY:"center"};default:throw z(e)}}_getOffset(e){switch(e){case"top":return{offsetY:T*-1};case"bottom":return{offsetY:T};case"left":return{offsetX:T*-1};case"right":return{offsetX:T};default:throw z(e)}}_getInversePopoverDirection(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}_getInversePosition(e){return{top:"bottom",bottom:"top",start:"end",end:"start",center:"center"}[e]}_getFallbackPositions(e,o=this._possiblePopoverDirections){if(!e)return[];let s=o.filter(b=>b!==e),a=[];switch(e){case"top":case"bottom":{a=this._getVerticalFallbackPositionPairs(e);break}case"left":case"right":{a=this._getHorizontalFallbackPositionPairs(e);break}}let _=this._getInversePopoverDirection(e),g=s.includes(_)?_:o[0];return[...a,...this._getFallbackPositions(g,s)]}_getVerticalFallbackPositionPairs(e){let o=e===this.direction,s=[],a=c(c(c({},this._getOrigin(e)),this._getOverlayPosition(e)),this._getOffset(e));return o||s.push(a),s.push(M(c({},a),{originX:"start",overlayX:"start"}),M(c({},a),{originX:"end",overlayX:"end"})),s}_getHorizontalFallbackPositionPairs(e){let o=this._getOffset(e);return[c(c(c({},this._getOrigin(e)),this._getOverlayPosition(e)),o)]}_dirChangeHandler(){this.overlayRef&&(this.closePopover(),this.overlayRef.dispose(),this.overlayRef=null,this._overlayDestroyed.next())}get isRtl(){return this._dir?.value==="rtl"}};t=new WeakMap,n.\u0275fac=function(o){return new(o||n)(l(I),l($),l(ee),l(he),l(ve),l(fe),l(J),l(de),l(_e,8),l(Ae,8),l(Ce),l(Y))},n.\u0275dir=N({type:n,selectors:[["","nxPopoverTriggerFor",""]],hostVars:3,hostBindings:function(o,s){o&1&&S("click",function(){return s.handleClick()}),o&2&&R("aria-haspopup",!0)("aria-expanded",s.isOpen)("aria-describedby",s.isOpen?s.id:null)},inputs:{show:[p.None,"nxPopoverShow","show"],closeable:[p.None,"nxPopoverCloseable","closeable"],closeOnClickOutside:"closeOnClickOutside",hidePopoverArrow:"hidePopoverArrow",popoverWidth:[p.None,"nxPopoverWidth","popoverWidth"],popoverMaxWidthh:[p.None,"nxPopoverMaxWidth","popoverMaxWidthh"],popover:[p.None,"nxPopoverTriggerFor","popover"],direction:[p.None,"nxPopoverDirection","direction"],popoverInitialVisible:[p.None,"nxPopoverInitialVisible","popoverInitialVisible"],visibleChange:[p.None,"nxPopoverVisibleChange","visibleChange"],modal:[p.None,"nxPopoverModal","modal"],trigger:[p.None,"nxPopoverTrigger","trigger"],scrollStrategy:[p.None,"nxPopoverScrollStrategy","scrollStrategy"]},outputs:{changeShow:"nxPopoverShowChange"},exportAs:["nxPopoverTrigger"]});let r=n;return r})(),gt=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=G({type:t}),t.\u0275inj=U({providers:[we,Ne],imports:[pe,ye,be]});let r=t;return r})();export{Ee as a,we as b,ft as c,Ce as d,Ae as e,_t as f,gt as g};
