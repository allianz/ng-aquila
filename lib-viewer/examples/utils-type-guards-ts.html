<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">NxHeaderCellDirective</span>,
  <span class="hljs-title class_">NxTableCellComponent</span>,
  <span class="hljs-title class_">NxTableComponent</span>,
  <span class="hljs-title class_">NxTableRowComponent</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@allianz/ng-aquila/table&#x27;</span>;
<span class="hljs-keyword">import</span> {
  isBoolean,
  isFalse,
  isNull,
  isNullable,
  isNumber,
  isString,
  isTrue,
  isTruthy,
  isUndefined,
  notEmpty,
  notNull,
  notNullable,
  notUndefined,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@allianz/ng-aquila/utils&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;

<span class="hljs-keyword">const</span> mixedArray = [<span class="hljs-string">&#x27;str&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">undefined</span>];

<span class="hljs-keyword">function</span> <span class="hljs-title function_">asText</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">unknown</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> value + <span class="hljs-string">&#x27;&#x27;</span>;
  }
  <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> value) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;string&#x27;</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">`&#x27;<span class="hljs-subst">${value}</span>&#x27;`</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;object&#x27;</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;object&gt;&#x27;</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;function&#x27;</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;function&gt;&#x27;</span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> value + <span class="hljs-string">&#x27;&#x27;</span>;
  }
}

<span class="hljs-keyword">type</span> primitive = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> | <span class="hljs-built_in">boolean</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@title</span> Type guard utilities
 */</span>
<span class="hljs-meta">@Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;utils-type-guards-example&#x27;</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">&#x27;./utils-type-guards-example.html&#x27;</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">&#x27;./utils-type-guards-example.css&#x27;</span>],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">NxTableComponent</span>,
    <span class="hljs-title class_">NxTableRowComponent</span>,
    <span class="hljs-title class_">NxHeaderCellDirective</span>,
    <span class="hljs-title class_">NxTableCellComponent</span>,
  ],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UtilsTypeGuardsExampleComponent</span> {
  mixedArray = mixedArray;

  <span class="hljs-attr">notNull</span>: (primitive | <span class="hljs-literal">undefined</span>)[] = mixedArray.<span class="hljs-title function_">filter</span>(notNull);
  <span class="hljs-attr">notNullable</span>: primitive[] = mixedArray.<span class="hljs-title function_">filter</span>(notNullable);
  <span class="hljs-attr">notUndefined</span>: (primitive | <span class="hljs-literal">null</span>)[] = mixedArray.<span class="hljs-title function_">filter</span>(notUndefined);

  <span class="hljs-attr">isTruthy</span>: primitive[] = mixedArray.<span class="hljs-title function_">filter</span>(isTruthy);

  <span class="hljs-attr">isString</span>: <span class="hljs-built_in">string</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isString);
  <span class="hljs-attr">isNumber</span>: <span class="hljs-built_in">number</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isNumber);
  <span class="hljs-attr">isBoolean</span>: <span class="hljs-built_in">boolean</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isBoolean);

  <span class="hljs-attr">isTrue</span>: <span class="hljs-literal">true</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isTrue);
  <span class="hljs-attr">isFalse</span>: <span class="hljs-literal">false</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isFalse);

  <span class="hljs-attr">isNull</span>: <span class="hljs-literal">null</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isNull);
  <span class="hljs-attr">isNullable</span>: (<span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>)[] = mixedArray.<span class="hljs-title function_">filter</span>(isNullable);
  <span class="hljs-attr">isUndefined</span>: <span class="hljs-literal">undefined</span>[] = mixedArray.<span class="hljs-title function_">filter</span>(isUndefined);

  <span class="hljs-comment">// workaround: notEmpty() is typed to require `ArrayLike` as param</span>
  notEmpty = (mixedArray <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>[]).<span class="hljs-title function_">filter</span>(notEmpty);

  <span class="hljs-title function_">toText</span>(<span class="hljs-attr">value</span>: <span class="hljs-built_in">unknown</span>[]): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">map</span>(asText).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;, &#x27;</span>);
  }
}
