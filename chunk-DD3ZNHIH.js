import{f as me}from"./chunk-RVW73ULS.js";import{f as fe,j as W}from"./chunk-IBXNPVLQ.js";import{g as ue}from"./chunk-P5OTZXCI.js";import{b as F,c as C}from"./chunk-KXWP5RPH.js";import{b as L}from"./chunk-VJNTK4K4.js";import{s as ce}from"./chunk-NWD76NQC.js";import{A as ge,r as de,x as he,z as pe}from"./chunk-MIQDUXHK.js";import{a as le}from"./chunk-EOEWAY3L.js";import{A as se}from"./chunk-PVCVFPWW.js";import{Bc as ne,Db as Z,Eb as a,Ec as I,Fc as p,Gb as G,J as T,Ja as q,Jb as O,Jc as N,Kb as E,Kc as re,Lc as f,Mc as _,Nc as u,Pc as D,Qa as $,Qb as z,Ra as X,Rb as J,Rc as oe,Sc as ie,U as Q,Ua as K,Wb as R,Yc as ae,ca as A,db as U,ea as d,fc as ee,ha as k,hc as te,ic as S,jd as j,l as g,la as H,lc as B,na as V,qc as h,qd as v,rc as l,sa as Y,sd as w,vb as M,yb as c}from"./chunk-QFNFGJ3Y.js";var Ce=["popover"],ye=[[["nx-dropdown"]],[["","nxError",""]],[["","nxInput",""]]],xe=["nx-dropdown","[nxError]","[nxInput]"];function be(r,_e){r&1&&(h(0,"div",2),p(1,2),l())}var Pe=["*",[["nx-error"]]],Me=["*","nx-error"];function Oe(r,_e){r&1&&(h(0,"div",1),p(1,1),l())}var y=class{},x=(()=>{class r{static{this._labelKey=0}constructor(n,t,e,o,i,m,b){this.elementRef=n,this._cdr=t,this._renderer=e,this._overlay=o,this._viewContainerRef=i,this._overlayPositionBuilder=m,this._nlfErrorWrapper=b,this.labelId=`nx-word-label-${r._labelKey++}`,this.inputChanges=new g,this._hasErrors=K(!1),this.control=O.required(C),this._setAriaLabelledBy=w(()=>{let s=this.control();s.ariaLabelledBy!==null&&s.ariaLabelledBy!==void 0&&(s.ariaLabelledBy=`${this.labelId} ${s.ariaLabelledBy}`),s.ariaLabelledBy===null&&(s.ariaLabelledBy=this.labelId)}),this._errorChildren=E(F),this.currentTextWidth=0,this.size="regular",this.label="",this.describedByInput=$(void 0,{alias:"describedBy"}),this.describedBy=v(()=>{let ve=this.describedByInput()===void 0&&this._nlfErrorWrapper._errorId()!==void 0?this._nlfErrorWrapper._errorId():void 0,we=this._errorChildren()?.map(P=>P.id);return[ve,...we,this.describedByInput()].filter(P=>P!=null)}),this.describedByEffect=w(()=>{this.control().setDescribedByIds(this.describedBy())}),this._destroyed=new g,this._updatePopoverStateEffect=w(()=>{this._errorChildren(),this.updateErrorPopoverState()})}ngOnInit(){this.setupErrorPopover()}ngAfterContentInit(){this.control().stateChanges.pipe(A(null),d(this._destroyed)).subscribe(()=>{this._hasErrors.set(this.control().errorState),this.updateErrorPopoverState(),this._cdr.markForCheck()}),this.control().stateChanges.pipe(d(this._destroyed)).subscribe(n=>{this.updateCurrentTextWidth(),this.inputChanges.next()})}ngOnDestroy(){this._updatePopoverStateEffect.destroy(),this._setAriaLabelledBy.destroy(),this._destroyed.next(),this._destroyed.complete(),this._overlayRef&&this._overlayRef.dispose()}updateCurrentTextWidth(){this.measureCanvas||(this.measureCanvas=this._renderer.createElement("canvas"));let n=this.measureCanvas.getContext("2d");if(!n)return;let t=this.control().elementRef,e=window.getComputedStyle(t.nativeElement);n.font=ce(e);let i=n.measureText(t.nativeElement.value).width+parseInt(e.paddingRight,10)+parseInt(e.paddingLeft,10)+1,b=this.elementRef.nativeElement.parentElement.getBoundingClientRect();this.currentTextWidth=Math.max(parseInt(e.minWidth,10),i),this.currentTextWidth=Math.min(this.currentTextWidth,b.width),this._overlayRef?.hasAttached()&&this._overlayState.positionStrategy.apply()}repositionError(){this._overlayRef?.hasAttached()&&this._overlayState.positionStrategy.apply()}getConnectedOverlayOrigin(){return this.elementRef}get isFocused(){return this.control().focused}get isFilled(){return!this.control().empty}get hasDropdown(){return!!this._dropdown}updateErrorPopoverState(){this._hasErrors()&&this._errorChildren().length>0?this.showPopover():this.hidePopover()}setupErrorPopover(){this._popover.triggerType="manual",this._popover.tabIndex=null;let n=this._overlayPositionBuilder.flexibleConnectedTo(this.elementRef).withLockedPosition(!0).withFlexibleDimensions(!1).withPush(!0).withPositions([{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"},{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top"}]).withDefaultOffsetY(-8);this._overlayState=new he,this._overlayState.positionStrategy=n,this._overlayState.scrollStrategy=this._overlay.scrollStrategies.reposition(),this._overlayRef=this._overlay.create(this._overlayState),this._overlayState.positionStrategy.positionChanges.pipe(d(this._destroyed)).subscribe(t=>{let e=t.connectionPair;this.positionArrow(e),this._embeddedViewRef&&!this._embeddedViewRef.destroyed&&this._embeddedViewRef.detectChanges()})}positionArrow(n){if(this._overlayRef){let t=this.elementRef.nativeElement.getBoundingClientRect().left,e=this.elementRef.nativeElement.getBoundingClientRect().width/2,o=this._overlayRef.overlayElement.parentElement.offsetLeft,i=this._overlayRef.overlayElement.offsetLeft,m=t+e-(o+i);n.originY==="top"&&n.overlayY==="bottom"?this._popover.direction="top":this._popover.direction="bottom",this._popover.arrowStyle={left:m+"px"}}}showPopover(){if(!this._overlayRef?.hasAttached()){let n=new de(this._popover.templateRef,this._viewContainerRef);this._embeddedViewRef=this._overlayRef?.attach(n)}}hidePopover(){this._overlayRef?.detach()}static{this.\u0275fac=function(t){return new(t||r)(a(X),a(j),a(Z),a(ge),a(G),a(pe),a(y))}}static{this.\u0275cmp=z({type:r,selectors:[["nx-word"]],contentQueries:function(t,e,o){if(t&1&&(u(o,e.control,C,5),u(o,e._errorChildren,F,4),N(o,C,5),N(o,me,5)),t&2){D(2);let i;f(i=_())&&(e._control=i.first),f(i=_())&&(e._dropdown=i.first)}},viewQuery:function(t,e){if(t&1&&re(Ce,7),t&2){let o;f(o=_())&&(e._popover=o.first)}},hostVars:16,hostBindings:function(t,e){t&2&&(te("width",e.currentTextWidth,"px"),S("size-short",e.size=="short")("size-regular",e.size=="regular")("size-long",e.size=="long")("has-error",e._hasErrors())("is-focused",e.isFocused)("is-filled",e.isFilled)("has-dropdown",e.hasDropdown))},inputs:{size:"size",label:"label",describedByInput:[1,"describedBy","describedByInput"]},ngContentSelectors:xe,decls:8,vars:4,consts:[["popover",""],[1,"cdk-visually-hidden"],[1,"nx-word__inner-wrapper"]],template:function(t,e){t&1&&(I(ye),h(0,"div")(1,"label",1),oe(2),l(),R(3,be,2,0,"div",2),p(4),l(),h(5,"nx-popover",null,0),p(7,1),l()),t&2&&(c(),ee("for",e.hasDropdown?"":e.control().id)("id",e.labelId),c(),ie(e.label),c(),B(e.hasDropdown?-1:3))},dependencies:[W,fe],styles:["[_nghost-%COMP%]{display:inline-block;position:relative;font-weight:400;text-align:center;hyphens:none;width:100%;margin:0 4px}[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:var(--natural-language-form-border-color)}.size-short[_nghost-%COMP%]{min-width:80px}.size-regular[_nghost-%COMP%]{min-width:152px}.size-long[_nghost-%COMP%]{min-width:360px}@media (max-width: 991px){.size-long[_nghost-%COMP%]{min-width:280px}}@media (max-width: 703px){.size-long[_nghost-%COMP%]{min-width:248px}}[_nghost-%COMP%]     .c-input{display:inline-block;text-align:inherit;font-size:inherit;line-height:inherit;background:0 0;color:inherit;border:none;outline:0;margin:0;width:100%;max-width:100%;height:auto;box-shadow:none;padding:0 8px}[_nghost-%COMP%]     .c-input.is-focused{outline:none;box-shadow:none}[_nghost-%COMP%]     .c-input.is-filled, [_nghost-%COMP%]     .c-input.is-focused{color:var(--natural-language-form-active-color);font-weight:400}[_nghost-%COMP%]     .c-input.is-disabled{cursor:not-allowed}[_nghost-%COMP%]     .c-input::-ms-clear{display:none}[_nghost-%COMP%]     nx-dropdown{position:relative;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:var(--natural-language-form-border-color)}[_nghost-%COMP%]     nx-dropdown .nx-dropdown__container{font-size:inherit;margin-bottom:-nx-spacer(4xs)}@media (max-width: 991px){[_nghost-%COMP%]     nx-dropdown .nx-dropdown__container{font-size:26px}}[_nghost-%COMP%]     nx-dropdown.is-filled, [_nghost-%COMP%]     nx-dropdown.has-focus{color:var(--natural-language-form-active-color);border-color:var(--natural-language-form-active-border-color)}[_nghost-%COMP%]     nx-dropdown.has-focus{border-bottom-width:4px}[_nghost-%COMP%]     nx-dropdown .nx-dropdown__icon{line-height:inherit}[_nghost-%COMP%]     .nx-word__input-wrapper{width:100%}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-filled[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--natural-language-form-active-border-color)}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-bottom-width:4px}.has-error[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--natural-language-form-error-border-color)}.has-error[_nghost-%COMP%]     nx-dropdown{color:var(--natural-language-form-error-color);border-color:var(--natural-language-form-error-border-color)}.has-error[_nghost-%COMP%]     .c-input.has-error{color:var(--natural-language-form-error-color)}.is-negative[_nghost-%COMP%]     .nx-dropdown, .is-negative   [_nghost-%COMP%]     .nx-dropdown, .is-negative[_nghost-%COMP%]     nx-dropdown, .is-negative   [_nghost-%COMP%]     nx-dropdown, .is-negative[_nghost-%COMP%]     nx-dropdown.is-filled, .is-negative   [_nghost-%COMP%]     nx-dropdown.is-filled{border-color:var(--negative);color:var(--negative)}.is-negative[_nghost-%COMP%]     .c-input, .is-negative   [_nghost-%COMP%]     .c-input, .is-negative[_nghost-%COMP%]     .c-input.has-error, .is-negative   [_nghost-%COMP%]     .c-input.has-error{color:var(--negative)}.is-negative[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-negative   [_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{border-color:var(--negative)}.nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-large-line-height)}@media (max-width: 991px){.nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-small-line-height)}}.nx-natural-language-form--small[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .nx-natural-language-form--small   [_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%]{height:var(--natural-language-form-small-line-height)}@media screen and (forced-colors: active){.nx-word__inner-wrapper[_ngcontent-%COMP%],   nx-dropdown{border-bottom-color:buttonText!important}.is-focused[_nghost-%COMP%]   .nx-word__inner-wrapper[_ngcontent-%COMP%], .is-focused[_nghost-%COMP%]     nx-dropdown{border-bottom-color:highlight!important}}"],changeDetection:0})}}return r})(),Ee="large",Ge=(()=>{class r{set negative(n){this._negative=le(n)}get negative(){return this._negative}set size(n){this._size=n,this._cdr.markForCheck()}get size(){return this._size}constructor(n){this._cdr=n,this._negative=!1,this._injector=Y(q),this._size=Ee,this.resizeEvent$=new g,this._errorComponent=O(L),this._errorId=v(()=>this._errorComponent()?.id),this._wordsComponents=E(x),this.wordsErrorStates=v(()=>this._wordsComponents()?this._wordsComponents().some(t=>t._hasErrors()):!1),this._destroyed=new g,U({write:()=>{this.updatePositionPopovers()}},{injector:this._injector})}onResize(n){this.resizeEvent$.next()}ngAfterContentInit(){let n=this._wordsComponents().map(e=>e.inputChanges);T(...n).pipe(d(this._destroyed)).subscribe(()=>{this.updatePositionPopovers()}),this.resizeObservable=this.resizeEvent$.pipe(k(500),Q(100)),this.resizeObservable.pipe(d(this._destroyed)).subscribe(()=>this.resizeWords())}resizeWords(){this._wordsComponents().forEach(n=>{n.updateCurrentTextWidth()})}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}updatePositionPopovers(){this._wordsComponents()&&this._wordsComponents().forEach(n=>{n.repositionError()})}static{this.\u0275fac=function(t){return new(t||r)(a(j))}}static{this.\u0275cmp=z({type:r,selectors:[["nx-natural-language-form"]],contentQueries:function(t,e,o){t&1&&(u(o,e._errorComponent,L,5),u(o,e._wordsComponents,x,4)),t&2&&D(2)},hostVars:6,hostBindings:function(t,e){t&1&&ne("orientationchange",function(i){return e.onResize(i)},!1,M)("resize",function(i){return e.onResize(i)},!1,M),t&2&&S("is-negative",e.negative)("nx-natural-language-form--small",e.size==="small")("nx-natural-language-form--large",e.size==="large")},inputs:{negative:[0,"negativeStyles","negative"],size:"size"},features:[ae([{provide:y,useExisting:H(()=>r)}])],ngContentSelectors:Me,decls:3,vars:1,consts:[[1,"nx-natural-language-form__wrapper"],[1,"nx-natural-language-form__error-wrapper"]],template:function(t,e){t&1&&(I(Pe),h(0,"div",0),p(1),l(),R(2,Oe,2,0,"div",1)),t&2&&(c(2),B(e.wordsErrorStates()?2:-1))},styles:["[_nghost-%COMP%]{display:block;font-size:var(--natural-language-form-large-font-size);line-height:var(--natural-language-form-large-line-height);font-weight:var(--natural-language-form-large-font-weight);letter-spacing:var(--natural-language-form-large-letter-spacing);color:var(--natural-language-form-text-color);padding-top:72px;padding-bottom:80px}[_nghost-%COMP%]     .c-input{font-size:inherit;line-height:inherit}[_nghost-%COMP%]     nx-word+nx-word{margin-left:2px}[dir=rtl]   [_nghost-%COMP%]     nx-word+nx-word{margin-right:2px;margin-left:initial}.is-negative[_nghost-%COMP%]{color:var(--negative)}@media (max-width: 991px){[_nghost-%COMP%]{font-size:var(--natural-language-form-small-font-size);line-height:var(--natural-language-form-small-line-height);font-weight:var(--natural-language-form-small-font-weight);letter-spacing:var(--natural-language-form-small-letter-spacing)}}.nx-natural-language-form__wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.nx-natural-language-form__wrapper[_ngcontent-%COMP%] >   *{margin-bottom:8px}.nx-natural-language-form--small[_nghost-%COMP%]{font-size:var(--natural-language-form-small-font-size);line-height:var(--natural-language-form-small-line-height);font-weight:var(--natural-language-form-small-font-weight);letter-spacing:var(--natural-language-form-small-letter-spacing)}.nx-natural-language-form--small[_nghost-%COMP%]     .c-input{font-size:inherit;line-height:inherit}.nx-natural-language-form__error-wrapper[_ngcontent-%COMP%]{margin-top:24px}"],changeDetection:0})}}return r})(),Je=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=J({type:r})}static{this.\u0275inj=V({imports:[se,ue,W,x,x]})}}return r})();export{x as a,Ge as b,Je as c};
