import{d as et}from"./chunk-ZKLAP5PK.js";import{a as qe,b as J}from"./chunk-4IVNSTZC.js";import{a as Ze,b as Q}from"./chunk-ZEMV7AOH.js";import"./chunk-NKP5SZF6.js";import{a as Xe,b as Qe,c as Je,d as V}from"./chunk-R66F4NEX.js";import{c as Ye}from"./chunk-BRHIMLLV.js";import"./chunk-S7KG66XE.js";import"./chunk-R27AHNFK.js";import{j as We,m as Ke}from"./chunk-5I4XSRWZ.js";import"./chunk-6ZIJTAEX.js";import{c as Ge,l as Ve}from"./chunk-WE4Y5QG5.js";import{e as He}from"./chunk-GQYXO2YC.js";import"./chunk-ZY57YZ36.js";import"./chunk-T7K5AKT2.js";import"./chunk-POCOEKP2.js";import"./chunk-23BCSERG.js";import"./chunk-QNAW32NO.js";import{p as ze,y as Ue}from"./chunk-NLK6Z5ZO.js";import{$b as L,Fb as ke,Gb as Te,Ic as A,Jc as X,K as De,Kc as E,Lc as Oe,Pc as $e,Qc as ae,Rc as le,Wc as Pe,Xc as je,a as O,bc as b,da as we,dc as W,ea as Ne,ec as K,fc as G,gc as z,hc as x,ic as f,kb as U,l as Ie,m as ce,ma as Le,na as be,rb as m,uc as k,xb as ue}from"./chunk-5D3REBHP.js";function I(t){return Array.isArray?Array.isArray(t):at(t)==="[object Array]"}var gt=1/0;function Ct(t){if(typeof t=="string")return t;let i=t+"";return i=="0"&&1/t==-gt?"-0":i}function xt(t){return t==null?"":Ct(t)}function B(t){return typeof t=="string"}function ct(t){return typeof t=="number"}function At(t){return t===!0||t===!1||_t(t)&&at(t)=="[object Boolean]"}function ut(t){return typeof t=="object"}function _t(t){return ut(t)&&t!==null}function v(t){return t!=null}function he(t){return!t.trim().length}function at(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var Et="Incorrect 'index' type",vt=t=>`Invalid value for key ${t}`,yt=t=>`Pattern length exceeds max of ${t}.`,Rt=t=>`Missing ${t} property in key`,Mt=t=>`Property 'weight' in key '${t}' must be a positive integer`,tt=Object.prototype.hasOwnProperty,de=class{constructor(i){this._keys=[],this._keyMap={};let e=0;i.forEach(n=>{let s=lt(n);this._keys.push(s),this._keyMap[s.id]=s,e+=s.weight}),this._keys.forEach(n=>{n.weight/=e})}get(i){return this._keyMap[i]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function lt(t){let i=null,e=null,n=null,s=1,r=null;if(B(t)||I(t))n=t,i=it(t),e=pe(t);else{if(!tt.call(t,"name"))throw new Error(Rt("name"));let o=t.name;if(n=o,tt.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Mt(o));i=it(o),e=pe(o),r=t.getFn}return{path:i,id:e,weight:s,src:n,getFn:r}}function it(t){return I(t)?t:t.split(".")}function pe(t){return I(t)?t.join("."):t}function Bt(t,i){let e=[],n=!1,s=(r,o,u)=>{if(v(r))if(!o[u])e.push(r);else{let a=o[u],c=r[a];if(!v(c))return;if(u===o.length-1&&(B(c)||ct(c)||At(c)))e.push(xt(c));else if(I(c)){n=!0;for(let l=0,d=c.length;l<d;l+=1)s(c[l],o,u+1)}else o.length&&s(c,o,u+1)}};return s(t,B(i)?i.split("."):i,0),n?e:e[0]}var Ft={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},St={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,i)=>t.score===i.score?t.idx<i.idx?-1:1:t.score<i.score?-1:1},It={location:0,threshold:.6,distance:100},Dt={useExtendedSearch:!1,getFn:Bt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},h=O(O(O(O({},St),Ft),It),Dt),wt=/[^ ]+/g;function Nt(t=1,i=3){let e=new Map,n=Math.pow(10,i);return{get(s){let r=s.match(wt).length;if(e.has(r))return e.get(r);let o=1/Math.pow(r,.5*t),u=parseFloat(Math.round(o*n)/n);return e.set(r,u),u},clear(){e.clear()}}}var H=class{constructor({getFn:i=h.getFn,fieldNormWeight:e=h.fieldNormWeight}={}){this.norm=Nt(e,3),this.getFn=i,this.isCreated=!1,this.setIndexRecords()}setSources(i=[]){this.docs=i}setIndexRecords(i=[]){this.records=i}setKeys(i=[]){this.keys=i,this._keysMap={},i.forEach((e,n)=>{this._keysMap[e.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,B(this.docs[0])?this.docs.forEach((i,e)=>{this._addString(i,e)}):this.docs.forEach((i,e)=>{this._addObject(i,e)}),this.norm.clear())}add(i){let e=this.size();B(i)?this._addString(i,e):this._addObject(i,e)}removeAt(i){this.records.splice(i,1);for(let e=i,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(i,e){return i[this._keysMap[e]]}size(){return this.records.length}_addString(i,e){if(!v(i)||he(i))return;let n={v:i,i:e,n:this.norm.get(i)};this.records.push(n)}_addObject(i,e){let n={i:e,$:{}};this.keys.forEach((s,r)=>{let o=s.getFn?s.getFn(i):this.getFn(i,s.path);if(v(o)){if(I(o)){let u=[],a=[{nestedArrIndex:-1,value:o}];for(;a.length;){let{nestedArrIndex:c,value:l}=a.pop();if(v(l))if(B(l)&&!he(l)){let d={v:l,i:c,n:this.norm.get(l)};u.push(d)}else I(l)&&l.forEach((d,p)=>{a.push({nestedArrIndex:p,value:d})})}n.$[r]=u}else if(B(o)&&!he(o)){let u={v:o,n:this.norm.get(o)};n.$[r]=u}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function nt(t,i,{getFn:e=h.getFn,fieldNormWeight:n=h.fieldNormWeight}={}){let s=new H({getFn:e,fieldNormWeight:n});return s.setKeys(t.map(lt)),s.setSources(i),s.create(),s}function Lt(t,{getFn:i=h.getFn,fieldNormWeight:e=h.fieldNormWeight}={}){let{keys:n,records:s}=t,r=new H({getFn:i,fieldNormWeight:e});return r.setKeys(n),r.setIndexRecords(s),r}function Z(t,{errors:i=0,currentLocation:e=0,expectedLocation:n=0,distance:s=h.distance,ignoreLocation:r=h.ignoreLocation}={}){let o=i/t.length;if(r)return o;let u=Math.abs(n-e);return s?o+u/s:u?1:o}function bt(t=[],i=h.minMatchCharLength){let e=[],n=-1,s=-1,r=0;for(let o=t.length;r<o;r+=1){let u=t[r];u&&n===-1?n=r:!u&&n!==-1&&(s=r-1,s-n+1>=i&&e.push([n,s]),n=-1)}return t[r-1]&&r-n>=i&&e.push([n,r-1]),e}var $=32;function kt(t,i,e,{location:n=h.location,distance:s=h.distance,threshold:r=h.threshold,findAllMatches:o=h.findAllMatches,minMatchCharLength:u=h.minMatchCharLength,includeMatches:a=h.includeMatches,ignoreLocation:c=h.ignoreLocation}={}){if(i.length>$)throw new Error(yt($));let l=i.length,d=t.length,p=Math.max(0,Math.min(n,d)),g=r,C=p,_=u>1||a,R=_?Array(d):[],D;for(;(D=t.indexOf(i,C))>-1;){let y=Z(i,{currentLocation:D,expectedLocation:p,distance:s,ignoreLocation:c});if(g=Math.min(y,g),C=D+l,_){let w=0;for(;w<l;)R[D+w]=1,w+=1}}C=-1;let S=[],P=1,T=l+d,ft=1<<l-1;for(let y=0;y<l;y+=1){let w=0,N=T;for(;w<N;)Z(i,{errors:y,currentLocation:p+N,expectedLocation:p,distance:s,ignoreLocation:c})<=g?w=N:T=N,N=Math.floor((T-w)/2+w);T=N;let Fe=Math.max(1,p-N+1),oe=o?d:Math.min(p+N,d)+l,j=Array(oe+2);j[oe+1]=(1<<y)-1;for(let M=oe;M>=Fe;M-=1){let Y=M-1,Se=e[t.charAt(Y)];if(_&&(R[Y]=+!!Se),j[M]=(j[M+1]<<1|1)&Se,y&&(j[M]|=(S[M+1]|S[M])<<1|1|S[M+1]),j[M]&ft&&(P=Z(i,{errors:y,currentLocation:Y,expectedLocation:p,distance:s,ignoreLocation:c}),P<=g)){if(g=P,C=Y,C<=p)break;Fe=Math.max(1,2*p-C)}}if(Z(i,{errors:y+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>g)break;S=j}let re={isMatch:C>=0,score:Math.max(.001,P)};if(_){let y=bt(R,u);y.length?a&&(re.indices=y):re.isMatch=!1}return re}function Tt(t){let i={};for(let e=0,n=t.length;e<n;e+=1){let s=t.charAt(e);i[s]=(i[s]||0)|1<<n-e-1}return i}var q=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t,ee=class{constructor(i,{location:e=h.location,threshold:n=h.threshold,distance:s=h.distance,includeMatches:r=h.includeMatches,findAllMatches:o=h.findAllMatches,minMatchCharLength:u=h.minMatchCharLength,isCaseSensitive:a=h.isCaseSensitive,ignoreDiacritics:c=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:s,includeMatches:r,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:c,ignoreLocation:l},i=a?i:i.toLowerCase(),i=c?q(i):i,this.pattern=i,this.chunks=[],!this.pattern.length)return;let d=(g,C)=>{this.chunks.push({pattern:g,alphabet:Tt(g),startIndex:C})},p=this.pattern.length;if(p>$){let g=0,C=p%$,_=p-C;for(;g<_;)d(this.pattern.substr(g,$),g),g+=$;if(C){let R=p-$;d(this.pattern.substr(R),R)}}else d(this.pattern,0)}searchIn(i){let{isCaseSensitive:e,ignoreDiacritics:n,includeMatches:s}=this.options;if(i=e?i:i.toLowerCase(),i=n?q(i):i,this.pattern===i){let _={isMatch:!0,score:0};return s&&(_.indices=[[0,i.length-1]]),_}let{location:r,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:c,ignoreLocation:l}=this.options,d=[],p=0,g=!1;this.chunks.forEach(({pattern:_,alphabet:R,startIndex:D})=>{let{isMatch:S,score:P,indices:T}=kt(i,_,R,{location:r+D,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:c,includeMatches:s,ignoreLocation:l});S&&(g=!0),p+=P,S&&T&&(d=[...d,...T])});let C={isMatch:g,score:g?p/this.chunks.length:1};return g&&s&&(C.indices=d),C}},F=class{constructor(i){this.pattern=i}static isMultiMatch(i){return st(i,this.multiRegex)}static isSingleMatch(i){return st(i,this.singleRegex)}search(){}};function st(t,i){let e=t.match(i);return e?e[1]:null}var me=class extends F{constructor(i){super(i)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(i){let e=i===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},fe=class extends F{constructor(i){super(i)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(i){let n=i.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,i.length-1]}}},ge=class extends F{constructor(i){super(i)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(i){let e=i.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Ce=class extends F{constructor(i){super(i)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(i){let e=!i.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},xe=class extends F{constructor(i){super(i)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(i){let e=i.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[i.length-this.pattern.length,i.length-1]}}},Ae=class extends F{constructor(i){super(i)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(i){let e=!i.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,i.length-1]}}},te=class extends F{constructor(i,{location:e=h.location,threshold:n=h.threshold,distance:s=h.distance,includeMatches:r=h.includeMatches,findAllMatches:o=h.findAllMatches,minMatchCharLength:u=h.minMatchCharLength,isCaseSensitive:a=h.isCaseSensitive,ignoreDiacritics:c=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){super(i),this._bitapSearch=new ee(i,{location:e,threshold:n,distance:s,includeMatches:r,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(i){return this._bitapSearch.searchIn(i)}},ie=class extends F{constructor(i){super(i)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(i){let e=0,n,s=[],r=this.pattern.length;for(;(n=i.indexOf(this.pattern,e))>-1;)e=n+r,s.push([n,e-1]);let o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}},_e=[me,ie,ge,Ce,Ae,xe,fe,te],rt=_e.length,Ot=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$t="|";function Pt(t,i={}){return t.split($t).map(e=>{let n=e.trim().split(Ot).filter(r=>r&&!!r.trim()),s=[];for(let r=0,o=n.length;r<o;r+=1){let u=n[r],a=!1,c=-1;for(;!a&&++c<rt;){let l=_e[c],d=l.isMultiMatch(u);d&&(s.push(new l(d,i)),a=!0)}if(!a)for(c=-1;++c<rt;){let l=_e[c],d=l.isSingleMatch(u);if(d){s.push(new l(d,i));break}}}return s})}var jt=new Set([te.type,ie.type]),Ee=class{constructor(i,{isCaseSensitive:e=h.isCaseSensitive,ignoreDiacritics:n=h.ignoreDiacritics,includeMatches:s=h.includeMatches,minMatchCharLength:r=h.minMatchCharLength,ignoreLocation:o=h.ignoreLocation,findAllMatches:u=h.findAllMatches,location:a=h.location,threshold:c=h.threshold,distance:l=h.distance}={}){this.query=null,this.options={isCaseSensitive:e,ignoreDiacritics:n,includeMatches:s,minMatchCharLength:r,findAllMatches:u,ignoreLocation:o,location:a,threshold:c,distance:l},i=e?i:i.toLowerCase(),i=n?q(i):i,this.pattern=i,this.query=Pt(this.pattern,this.options)}static condition(i,e){return e.useExtendedSearch}searchIn(i){let e=this.query;if(!e)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:s,ignoreDiacritics:r}=this.options;i=s?i:i.toLowerCase(),i=r?q(i):i;let o=0,u=[],a=0;for(let c=0,l=e.length;c<l;c+=1){let d=e[c];u.length=0,o=0;for(let p=0,g=d.length;p<g;p+=1){let C=d[p],{isMatch:_,indices:R,score:D}=C.search(i);if(_){if(o+=1,a+=D,n){let S=C.constructor.type;jt.has(S)?u=[...u,...R]:u.push(R)}}else{a=0,o=0,u.length=0;break}}if(o){let p={isMatch:!0,score:a/o};return n&&(p.indices=u),p}}return{isMatch:!1,score:1}}},ve=[];function zt(...t){ve.push(...t)}function ye(t,i){for(let e=0,n=ve.length;e<n;e+=1){let s=ve[e];if(s.condition(t,i))return new s(t,i)}return new ee(t,i)}var ne={AND:"$and",OR:"$or"},Re={PATH:"$path",PATTERN:"$val"},Me=t=>!!(t[ne.AND]||t[ne.OR]),Ut=t=>!!t[Re.PATH],Wt=t=>!I(t)&&ut(t)&&!Me(t),ot=t=>({[ne.AND]:Object.keys(t).map(i=>({[i]:t[i]}))});function ht(t,i,{auto:e=!0}={}){let n=s=>{let r=Object.keys(s),o=Ut(s);if(!o&&r.length>1&&!Me(s))return n(ot(s));if(Wt(s)){let a=o?s[Re.PATH]:r[0],c=o?s[Re.PATTERN]:s[a];if(!B(c))throw new Error(vt(a));let l={keyId:pe(a),pattern:c};return e&&(l.searcher=ye(c,i)),l}let u={children:[],operator:r[0]};return r.forEach(a=>{let c=s[a];I(c)&&c.forEach(l=>{u.children.push(n(l))})}),u};return Me(t)||(t=ot(t)),n(t)}function Kt(t,{ignoreFieldNorm:i=h.ignoreFieldNorm}){t.forEach(e=>{let n=1;e.matches.forEach(({key:s,norm:r,score:o})=>{let u=s?s.weight:null;n*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(i?1:r))}),e.score=n})}function Gt(t,i){let e=t.matches;i.matches=[],v(e)&&e.forEach(n=>{if(!v(n.indices)||!n.indices.length)return;let{indices:s,value:r}=n,o={indices:s,value:r};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),i.matches.push(o)})}function Vt(t,i){i.score=t.score}function Ht(t,i,{includeMatches:e=h.includeMatches,includeScore:n=h.includeScore}={}){let s=[];return e&&s.push(Gt),n&&s.push(Vt),t.map(r=>{let{idx:o}=r,u={item:i[o],refIndex:o};return s.length&&s.forEach(a=>{a(r,u)}),u})}var se=(()=>{class t{constructor(e,n={},s){this.options=O(O({},h),n),this.options.useExtendedSearch,this._keyStore=new de(this.options.keys),this.setCollection(e,s)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof H))throw new Error(Et);this._myIndex=n||nt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){v(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let n=[];for(let s=0,r=this._docs.length;s<r;s+=1){let o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,r-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){let{includeMatches:s,includeScore:r,shouldSort:o,sortFn:u,ignoreFieldNorm:a}=this.options,c=B(e)?B(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Kt(c,{ignoreFieldNorm:a}),o&&c.sort(u),ct(n)&&n>-1&&(c=c.slice(0,n)),Ht(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){let n=ye(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:o,i:u,n:a})=>{if(!v(o))return;let{isMatch:c,score:l,indices:d}=n.searchIn(o);c&&r.push({item:o,idx:u,matches:[{score:l,value:o,norm:a,indices:d}]})}),r}_searchLogical(e){let n=ht(e,this.options),s=(a,c,l)=>{if(!a.children){let{keyId:p,searcher:g}=a,C=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return C&&C.length?[{idx:l,item:c,matches:C}]:[]}let d=[];for(let p=0,g=a.children.length;p<g;p+=1){let C=a.children[p],_=s(C,c,l);if(_.length)d.push(..._);else if(a.operator===ne.AND)return[]}return d},r=this._myIndex.records,o={},u=[];return r.forEach(({$:a,i:c})=>{if(v(a)){let l=s(n,a,c);l.length&&(o[c]||(o[c]={idx:c,item:a,matches:[]},u.push(o[c])),l.forEach(({matches:d})=>{o[c].matches.push(...d)}))}}),u}_searchObjectList(e){let n=ye(e,this.options),{keys:s,records:r}=this._myIndex,o=[];return r.forEach(({$:u,i:a})=>{if(!v(u))return;let c=[];s.forEach((l,d)=>{c.push(...this._findMatches({key:l,value:u[d],searcher:n}))}),c.length&&o.push({idx:a,item:u,matches:c})}),o}_findMatches({key:e,value:n,searcher:s}){if(!v(n))return[];let r=[];if(I(n))n.forEach(({v:o,i:u,n:a})=>{if(!v(o))return;let{isMatch:c,score:l,indices:d}=s.searchIn(o);c&&r.push({score:l,key:e,value:o,idx:u,norm:a,indices:d})});else{let{v:o,n:u}=n,{isMatch:a,score:c,indices:l}=s.searchIn(o);a&&r.push({score:c,key:e,value:o,norm:u,indices:l})}return r}}return t.version="7.1.0",t.createIndex=nt,t.parseIndex=Lt,t.config=h,t})();se.parseQuery=ht;zt(Ee);var dt={minMatchCharLength:4,threshold:.6,useExtendedSearch:!0,ignoreLocation:!0,keys:["id","examples","category","title","name","content","alias","directiveSelectors","directiveExportAs"]};var mt=(()=>{class t{init(){return new Promise(e=>{Promise.all([fetch("lib-viewer/fuse-search-index.json"),fetch("lib-viewer/fuse-search-entries.json")]).then(async n=>Promise.all(n.map(s=>s.json()))).then(n=>{let s={index:n[0],entries:n[1]},r=se.parseIndex(s.index);this.fuse=new se(s.entries,dt,r),e(!0)})})}search(e){return this.fuse.search(`'${e}`)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=Le({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Xt(t,i){t&1&&(x(0,"h1",5),A(1,"Initializing search ..."),f())}function Qt(t,i){if(t&1&&(x(0,"div",8)(1,"nx-link")(2,"a",9),A(3),f()(),x(4,"nx-badge",10),A(5),f(),x(6,"div",11),A(7),f()()),t&2){let e=i.$implicit;m(2),z("href",ae("my-viewer/documentation/",e.item.id),U),m(),X(e.item.title),m(2),E("",e.item.alias," "),m(2),Oe(" ",e.item.id," ",e.item.category," ")}}function Jt(t,i){if(t&1&&(x(0,"div")(1,"h2"),A(2),f(),K(3,Qt,8,6,"div",8,W),f()),t&2){let e=k(2);m(2),E(" Components (",e.searchResults.component.entries.length<e.searchResults.component.total?e.searchResults.component.entries.length+" of "+e.searchResults.component.total:e.searchResults.component.entries.length,") "),m(),G(e.searchResults.component.entries)}}function Zt(t,i){if(t&1&&(x(0,"span",15),A(1),f()),t&2){let e=k().$implicit;m(),E(" <",e.item.directiveSelectors==null?null:e.item.directiveSelectors.join(","),"> ")}}function qt(t,i){if(t&1&&(x(0,"div",8)(1,"nx-badge",13),A(2),f(),x(3,"span",14),A(4),f(),x(5,"nx-link")(6,"a",9),A(7),f()(),L(8,Zt,2,1,"span",15),x(9,"div",16),A(10),f()()),t&2){let e=i.$implicit,n=k(3);m(),z("type",$e(n.getApiBadge(e.item.type))),m(),E("",e.item.type," "),m(2),E(" ",e.item.id," \u25B8 "),m(2),z("href",le("my-viewer/documentation/",e.item.id,"/api#",e.item.name),U),m(),E(" ",e.item.name," "),m(),b(e.item.directiveSelectors&&(e.item.directiveSelectors!=null&&e.item.directiveSelectors.length)?8:-1),m(2),X(e.item.title)}}function ei(t,i){if(t&1&&(x(0,"div")(1,"h2",12),A(2),f(),K(3,qt,11,10,"div",8,W),f()),t&2){let e=k(2);m(2),E(" API (",e.searchResults.api.entries.length<e.searchResults.api.total?e.searchResults.api.entries.length+" of "+e.searchResults.api.total:e.searchResults.api.entries.length,") "),m(),G(e.searchResults.api.entries)}}function ti(t,i){if(t&1&&(x(0,"p",8)(1,"nx-link")(2,"a",9),A(3),f()()()),t&2){let e=i.$implicit;m(2),z("href",ae("my-viewer/guides/",e.item.id),U),m(),X(e.item.title)}}function ii(t,i){if(t&1&&(x(0,"div")(1,"h2",12),A(2),f(),K(3,ti,4,3,"p",8,W),f()),t&2){let e=k(2);m(2),E(" Guides (",e.searchResults.guide.entries.length<e.searchResults.guide.total?e.searchResults.guide.entries.length+" of "+e.searchResults.guide.total:e.searchResults.guide.entries.length,") "),m(),G(e.searchResults.guide.entries)}}function ni(t,i){if(t&1&&(x(0,"p",8)(1,"span",14),A(2),f(),A(3," \u25B8 "),x(4,"nx-link")(5,"a",9),A(6),f()()()),t&2){let e=i.$implicit;m(2),E(" ",e.item.module," "),m(3),z("href",le("my-viewer/documentation/",e.item.module,"/overview#",e.item.id.split("-").pop()),U),m(),E(" ",e.item.title," ")}}function si(t,i){if(t&1&&(x(0,"div")(1,"h2",12),A(2),f(),K(3,ni,7,5,"p",8,W),f()),t&2){let e=k(2);m(2),E(" Example (",e.searchResults.example.entries.length<e.searchResults.example.total?e.searchResults.example.entries.length+" of "+e.searchResults.example.total:e.searchResults.example.entries.length,") "),m(),G(e.searchResults.example.entries)}}function ri(t,i){if(t&1&&(x(0,"h1",5),A(1),f(),x(2,"div",6),A(3),x(4,"code"),A(5,'"search term"'),f(),A(6,"). "),f(),x(7,"div",7),L(8,Jt,5,1,"div"),L(9,ei,5,1,"div"),L(10,ii,5,1,"div"),L(11,si,5,1,"div"),f()),t&2){let e=k();m(),E("Results found for '",e.searchTerm,"'"),m(2),E(" We're showing maximum ",e.maxEntriesPerCategory," per category. Use quotation marks to search for a specific group of words (eg. "),m(5),b(!(e.searchResults==null||e.searchResults.component==null||e.searchResults.component.entries==null)&&e.searchResults.component.entries.length?8:-1),m(),b(!(e.searchResults==null||e.searchResults.api==null||e.searchResults.api.entries==null)&&e.searchResults.api.entries.length?9:-1),m(),b(!(e.searchResults==null||e.searchResults.guide==null||e.searchResults.guide.entries==null)&&e.searchResults.guide.entries.length?10:-1),m(),b(!(e.searchResults==null||e.searchResults.example==null||e.searchResults.example.entries==null)&&e.searchResults.example.entries.length?11:-1)}}var Be=(()=>{class t{set searchInput(e){this._searchInput=e,this.searchChanged$.next(e)}get searchInput(){return this._searchInput}constructor(e,n){this.activeRoute=e,this.fuseSearch=n,this.maxEntriesPerCategory=15,this.searchTerm="",this.initializing=!1,this.initReady$=new ce(!1),this.searchChanged$=new ce(""),this._destroyed=new Ie,this._searchInput=""}ngOnInit(){this.initSearch()}initSearch(){this.initializing=!0,this.fuseSearch.init().then(()=>{this.initReady$.next(!0)}),this.initReady$.pipe(Ne(this._destroyed),De(e=>e),we(()=>this.activeRoute.params)).subscribe(e=>{this.searchTerm=e.term,this.searchResults=this.groupResults(this.fuseSearch.search(e.term))})}groupResults(e){let n={};for(let s of e){let r=s.item;if(!n[r?.searchDisplayType])n[r.searchDisplayType]={entries:[],total:0};else if(n[r.searchDisplayType].entries.length===this.maxEntriesPerCategory){n[r.searchDisplayType].total++;continue}n[r.searchDisplayType].entries.push(s),n[r.searchDisplayType].total++}return n}getApiBadge(e){switch(e){case"directive":return"active";case"component":return"positive";case"service":return"critical";case"interface":return"negative";default:return""}}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}static{this.\u0275fac=function(n){return new(n||t)(ue(Ge),ue(mt))}}static{this.\u0275cmp=ke({type:t,selectors:[["nxv-search-results"]],inputs:{searchInput:"searchInput"},decls:8,vars:4,consts:[["cdkScrollable",""],["nxLayout","grid maxwidth",1,"search-results__wrapper","nx-grid","nx-grid--max-width"],["nxRow",""],["nxCol","12"],[1,"searchresult__content","documentation__content"],[1,"searchresults__header"],[1,"searchresults__info"],[1,"search-results"],[1,"search-results__entry"],[3,"href"],[1,"nx-margin-left-s"],[1,"nx-margin-bottom-m"],[1,"nx-margin-top-3m"],[1,"nx-margin-right-3xs",3,"type"],[2,"text-transform","capitalize"],[1,"hint"],[1,"nx-margin-bottom-m","nx-margin-top-3xs"]],template:function(n,s){n&1&&(x(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),L(5,Xt,2,0,"h1",5),Pe(6,"async"),L(7,ri,12,6),f()()()()()),n&2&&(m(5),b(je(6,2,s.initReady$)===!1?5:-1),m(2),b(s.searchTerm?7:-1))},dependencies:[We,V,Xe,Qe,Je,Q,Ze,J,qe,ze],styles:["[_nghost-%COMP%]{display:flex;height:100%}main[_ngcontent-%COMP%]{overflow:auto;height:100%;width:100%;display:flex;flex-direction:column}.search-results__wrapper[_ngcontent-%COMP%]{flex:1 0 auto}.searchresults__header[_ngcontent-%COMP%]{margin:20px 0}.searchresults__info[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.0625rem;margin-bottom:30px}.hint[_ngcontent-%COMP%]{opacity:.5;font-style:italic;font-weight:100}"]})}}return t})();var oi=[{path:":term",component:Be}],ki=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=Te({type:t})}static{this.\u0275inj=be({imports:[Ue,et,V,Ke,Q,J,V,He,Ye,Ve.forChild(oi),Be]})}}return t})();export{ki as SearchResultsModule};
