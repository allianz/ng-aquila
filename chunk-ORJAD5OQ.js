import{a as Q,d as ae,e as ce,g as he}from"./chunk-WM74LGRG.js";import{w as B}from"./chunk-24YYLMVA.js";import{a as de,b}from"./chunk-DHX4UWRX.js";import{B as oe}from"./chunk-EDQQKHAX.js";import{Ac as R,B as G,Bc as O,Cc as N,Da as V,Db as y,Fb as m,Ib as j,L as Y,Lb as k,Nb as te,Ob as ie,Sb as L,U as S,_b as F,a as q,b as K,bc as se,cc as ne,d as X,ea as D,lc as x,ma as E,n as p,nb as g,pb as ee,q as v,qa as J,rb as I,s as Z,ua as M,va as w,vb as a,wa as h,xb as T,yc as re,z,zc as C}from"./chunk-H42V67ZX.js";var U=class{constructor(){this.expansionModel=new he(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let d=[e];d.push(...this.getDescendants(e)),this.expansionModel.select(...d.map(t=>this._trackByValue(t)))}collapseDescendants(e){let d=[e];d.push(...this.getDescendants(e)),this.expansionModel.deselect(...d.map(t=>this._trackByValue(t)))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}},A=class extends U{constructor(e,d,t){super(),this.getLevel=e,this.isExpandable=d,this.options=t,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){let d=this.dataNodes.indexOf(e),t=[];for(let i=d+1;i<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[i]);i++)t.push(this.dataNodes[i]);return t}expandAll(){this.expansionModel.select(...this.dataNodes.map(e=>this._trackByValue(e)))}};var De=new J("CDK_TREE_NODE_OUTLET_NODE"),le=(()=>{let e=class e{constructor(t,i){this.viewContainer=t,this._node=i}};e.\u0275fac=function(i){return new(i||e)(a(k),a(De,8))},e.\u0275dir=h({type:e,selectors:[["","cdkTreeNodeOutlet",""]]});let r=e;return r})(),H=class{constructor(e){this.$implicit=e}},P=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(i){return new(i||e)(a(re))},e.\u0275dir=h({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}});let r=e;return r})();var u=(()=>{let e=class e{get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}constructor(t,i){this._differs=t,this._changeDetectorRef=i,this._onDestroy=new p,this._levels=new Map,this.viewChange=new v({start:0,end:Number.MAX_VALUE})}ngOnInit(){this._dataDiffer=this._differs.find([]).create(this.trackBy),this.treeControl}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){let t=this._nodeDefs.filter(i=>!i.when);t.length>1,this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(t){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let t;ce(this._dataSource)?t=this._dataSource.connect(this):z(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=Z(this._dataSource)),t&&(this._dataSubscription=t.pipe(D(this._onDestroy)).subscribe(i=>this.renderNodeChanges(i)))}renderNodeChanges(t,i=this._dataDiffer,s=this._nodeOutlet.viewContainer,n){let o=i.diff(t);o&&(o.forEachOperation((c,_,f)=>{if(c.previousIndex==null)this.insertNode(t[f],f,s,n);else if(f==null)s.remove(_),this._levels.delete(c.item);else{let _e=s.get(_);s.move(_e,f)}}),this._changeDetectorRef.detectChanges())}_getNodeDef(t,i){if(this._nodeDefs.length===1)return this._nodeDefs.first;let s=this._nodeDefs.find(n=>n.when&&n.when(i,t))||this._defaultNodeDef;return s}insertNode(t,i,s,n){let o=this._getNodeDef(t,i),c=new H(t);this.treeControl.getLevel?c.level=this.treeControl.getLevel(t):typeof n<"u"&&this._levels.has(n)?c.level=this._levels.get(n)+1:c.level=0,this._levels.set(t,c.level),(s||this._nodeOutlet.viewContainer).createEmbeddedView(o.template,c,i),l.mostRecentTreeNode&&(l.mostRecentTreeNode.data=t)}};e.\u0275fac=function(i){return new(i||e)(a(I),a(T))},e.\u0275cmp=M({type:e,selectors:[["cdk-tree"]],contentQueries:function(i,s,n){if(i&1&&O(n,P,5),i&2){let o;C(o=N())&&(s._nodeDefs=o)}},viewQuery:function(i,s){if(i&1&&R(le,7),i&2){let n;C(n=N())&&(s._nodeOutlet=n.first)}},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(i,s){i&1&&L(0,0)},dependencies:[le],encapsulation:2});let r=e;return r})(),l=(()=>{let e=class e{get role(){return"treeitem"}set role(t){this._elementRef.nativeElement.setAttribute("role",t)}get data(){return this._data}set data(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}constructor(t,i){this._elementRef=t,this._tree=i,this._destroyed=new p,this._dataChanges=new p,e.mostRecentTreeNode=this,this.role="treeitem"}ngOnInit(){this._parentNodeAriaLevel=ye(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){!this._tree.treeControl.isExpandable&&this._tree.treeControl.getChildren,this.role="treeitem"}};e.mostRecentTreeNode=null,e.\u0275fac=function(i){return new(i||e)(a(g),a(u))},e.\u0275dir=h({type:e,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:1,hostBindings:function(i,s){i&2&&m("aria-expanded",s.isExpanded)},inputs:{role:"role"},exportAs:["cdkTreeNode"]});let r=e;return r})();function ye(r){let e=r.parentElement;for(;e&&!me(e);)e=e.parentElement;return e?e.classList.contains("cdk-nested-tree-node")?b(e.getAttribute("aria-level")):0:-1}function me(r){let e=r.classList;return!!(e?.contains("cdk-nested-tree-node")||e?.contains("cdk-tree"))}var $=(()=>{let e=class e{get recursive(){return this._recursive}set recursive(t){this._recursive=de(t)}constructor(t,i){this._tree=t,this._treeNode=i,this._recursive=!1}_toggle(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}};e.\u0275fac=function(i){return new(i||e)(a(u),a(l))},e.\u0275dir=h({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(i,s){i&1&&F("click",function(o){return s._toggle(o)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}});let r=e;return r})();var ue=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=w({type:e}),e.\u0275inj=E({});let r=e;return r})();var Ce=["*"],Ne=(()=>{let e=class e{constructor(t){this._elementRef=t}focus(){this._elementRef.nativeElement.focus()}};e.\u0275fac=function(i){return new(i||e)(a(g))},e.\u0275dir=h({type:e,selectors:[["","nxTreeNodeActionItem",""]],hostVars:1,hostBindings:function(i,s){i&2&&m("tabindex",-1)}});let r=e;return r})(),W=class{transformFunction(e,d){let s=e,{children:t}=s,i=X(s,["children"]);return K(q({},i),{level:d,expandable:Array.isArray(t)&&t.length>0})}getLevel(e){return e.level}isExpandable(e){return e.expandable}getChildren(e){return e.children}_flattenNode(e,d,t,i){let s=this.transformFunction(e,d);if(t.push(s),this.isExpandable(s)){let n=this.getChildren(e);Array.isArray(n)?this._flattenChildren(n,d,t,i):n.pipe(S(1)).subscribe(o=>{this._flattenChildren(o,d,t,i)})}return t}_flattenChildren(e,d,t,i){e.forEach((s,n)=>{let o=i.slice();o.push(n!==e.length-1),this._flattenNode(s,d+1,t,o)})}flattenNodes(e){let d=[];return e.forEach(t=>this._flattenNode(t,0,d,[])),d}expandFlattenedNodes(e,d){let t=[],i=[];return i[0]=!0,e.forEach(s=>{let n=!0;for(let o=0;o<=this.getLevel(s);o++)n=n&&i[o];n&&t.push(s),this.isExpandable(s)&&(i[this.getLevel(s)+1]=d.isExpanded(s))}),t}},fe=class extends ae{set data(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this.treeControl.dataNodes=this._flattenedData.value}get data(){return this._data.value}constructor(e,d=[]){super(),this.treeControl=e,this._flattenedData=new v([]),this._expandedData=new v([]),this._data=new v([]),this._treeFlattener=new W,this.data=d}connect(e){let d=[e.viewChange,this.treeControl.expansionModel.changed,this._flattenedData];return Y(...d).pipe(G(()=>(this._expandedData.next(this._treeFlattener.expandFlattenedNodes(this._flattenedData.value,this.treeControl)),this._expandedData.value)))}disconnect(){}},pe=class extends A{constructor(){super(e=>e.level,e=>e.expandable)}},it=(()=>{let e=class e extends l{constructor(t,i,s){super(t,i),this._focusMonitor=s,this._focusMonitor.monitor(this._elementRef.nativeElement)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef.nativeElement),super.ngOnDestroy()}_focus(){this._tree.updateFocusedData(this._data)}focus(){this.actionItem?this.actionItem.focus?.():this._elementRef.nativeElement.focus()}};e.\u0275fac=function(i){return new(i||e)(a(g),a(u),a(B))},e.\u0275cmp=M({type:e,selectors:[["nx-tree-node"]],contentQueries:function(i,s,n){if(i&1&&O(n,Ne,5),i&2){let o;C(o=N())&&(s.actionItem=o.first)}},hostAttrs:[1,"nx-tree__node"],hostVars:6,hostBindings:function(i,s){i&2&&(m("aria-expanded",s.isExpanded)("aria-level",s.role==="treeitem"?s.level+1:null)("role",s.role)("tabindex",-1),j("is-expanded",s.isExpanded))},inputs:{disabled:"disabled",tabIndex:"tabIndex"},exportAs:["nxTreeNode"],features:[x([{provide:l,useExisting:e}]),y],ngContentSelectors:Ce,decls:2,vars:0,consts:[[1,"nx-tree__node-box"]],template:function(i,s){i&1&&(se(),te(0,"div",0),ne(1),ie())},encapsulation:2});let r=e;return r})(),st=(()=>{let e=class e extends P{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=V(e)))(s||e)}})(),e.\u0275dir=h({type:e,selectors:[["","nxTreeNodeDef",""]],inputs:{when:["nxTreeNodeDefWhen","when"],data:["nxTreeNode","data"]},features:[x([{provide:P,useExisting:e}]),y]});let r=e;return r})(),ge=(()=>{let e=class e{constructor(t){this.viewContainer=t}};e.\u0275fac=function(i){return new(i||e)(a(k))},e.\u0275dir=h({type:e,selectors:[["","nxTreeNodeOutlet",""]]});let r=e;return r})(),be=/([%A-Z]+)$/i,nt=(()=>{let e=class e{set level(t){this._level=b(t),this._setPadding()}get level(){return this._level}set offset(t){this._offset=b(t),this._setPadding()}get offset(){return this._offset}set indent(t){let i=t,s="px";if(typeof t=="string"){let n=t.split(be);i=n[0],s=n[1]||s}this.indentUnits=s,this._indent=b(i),this._setPadding()}get indent(){return this._indent}constructor(t,i,s,n,o){this._treeNode=t,this._tree=i,this._renderer=s,this._element=n,this._dir=o,this.indentUnits="px",this._offset=0,this._indent=24,this._destroyed=new p,this._setPadding(),this._dir&&this._dir.change.pipe(D(this._destroyed)).subscribe(()=>this._setPadding(!0)),t._dataChanges.pipe(D(this._destroyed)).subscribe(()=>this._setPadding())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){let t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,i=this._level||t;return i?`${i*this._indent+this._offset}${this.indentUnits}`:null}_setPadding(t=!1){let i=this._paddingIndent();if(i!==this._currentPadding||t){let s=this._element.nativeElement,n=this._dir&&this._dir.value==="rtl"?"paddingRight":"paddingLeft",o=n==="paddingLeft"?"paddingRight":"paddingLeft";this._renderer.setStyle(s,n,i),this._renderer.setStyle(s,o,null),this._currentPadding=i}}};e.\u0275fac=function(i){return new(i||e)(a(l),a(u),a(ee),a(g),a(Q,8))},e.\u0275dir=h({type:e,selectors:[["","nxTreeNodePadding",""]],hostVars:2,hostBindings:function(i,s){i&2&&j("nx-tree-node--with-padding",!0)},inputs:{level:["nxTreeNodePadding","level"],offset:["nxTreeNodePaddingOffset","offset"],indent:["nxTreeNodePaddingIndent","indent"]}});let r=e;return r})(),rt=(()=>{let e=class e extends ${};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=V(e)))(s||e)}})(),e.\u0275dir=h({type:e,selectors:[["","nxTreeNodeToggle",""]],inputs:{recursive:["nxTreeNodeToggleRecursive","recursive"]},features:[x([{provide:$,useExisting:e}]),y]});let r=e;return r})(),ot=(()=>{let e=class e extends u{set tabIndex(t){this._userTabIndex=t}constructor(t,i,s,n,o){super(t,i),this._cdr=i,this.dir=s,this._elementRef=n,this._focusMonitor=o,this.nodeMap=new Map,this.childrenMap=new Map,this.parentMap=new Map,this._tabIndex=0,this._userTabIndex=null,this._wrapperOnDestroy=new p}ngOnInit(){super.ngOnInit(),this._monitorTreeFocus()}ngOnDestroy(){super.ngOnDestroy(),this._wrapperOnDestroy.next(),this._wrapperOnDestroy.complete()}get focusedData(){return this._focusedData}insertToA11yNodeTracking(t,i,s,n){this.nodeMap.set(i,s),n&&this.parentMap.set(i,n),this._getChildrenList(n).includes(i)||this._getChildrenList(n).splice(t,0,i)}removeFromA11yNodeTracking(t,i){let n=this._getChildrenList(i).splice(t,1)[0];n&&n===this._focusedData&&this._changeFocusedData(this._getNextVisibleNode()),this.nodeMap.delete(n),this.parentMap.delete(n),this.childrenMap.delete(n)}moveInA11yNodeTracking(t,i,s){let n=this._getChildrenList(s),o=n.splice(t,1);n.splice(i,0,o[0])}updateFocusedData(t){this._focusedData=t}focus(){this._focusedData?this._changeFocusedData(this._focusedData):this.focusFirstVisibleNode()}focusFirstVisibleNode(){this._changeFocusedData(this._getFirstVisibleNode())}focusLastVisibleNode(){this._changeFocusedData(this._getLastVisibleNode())}focusPreviousVisibleNode(){if(!this._focusedData)return this.focusLastVisibleNode();this._changeFocusedData(this._getPreviousVisibleNode())}focusNextVisibleNode(){if(!this._focusedData)return this.focusFirstVisibleNode();this._changeFocusedData(this._getNextVisibleNode())}collapseCurrentFocusedNode(){this._focusedData&&this.treeControl&&(this.treeControl.isExpanded(this._focusedData)?this.treeControl.collapse(this._focusedData):this._changeFocusedData(this._getParentNode()))}expandCurrentFocusedNode(){this._focusedData&&this.treeControl&&(this.treeControl.isExpanded(this._focusedData)?this._changeFocusedData(this._getNextVisibleNode()):this.treeControl.expand(this._focusedData))}expandAllNodes(){this.treeControl&&this.treeControl.expandAll()}toggleCurrentFocusedNode(){this._focusedData&&this.treeControl&&this.treeControl.toggle(this._focusedData)}_isRtl(){return this.dir&&this.dir.value==="rtl"}_handleKeydown(t){switch(t.keyCode){case 36:this.focusFirstVisibleNode(),t.preventDefault();break;case 35:this.focusLastVisibleNode(),t.preventDefault();break;case 38:this.focusPreviousVisibleNode(),t.preventDefault();break;case 40:this.focusNextVisibleNode(),t.preventDefault();break;case 37:this._isRtl()?this.expandCurrentFocusedNode():this.collapseCurrentFocusedNode(),t.preventDefault();break;case 39:this._isRtl()?this.collapseCurrentFocusedNode():this.expandCurrentFocusedNode(),t.preventDefault();break;case 106:this.expandAllNodes(),t.preventDefault();break;default:}}_changeFocusedData(t){t&&(this._focusedData=t,this.nodeMap.has(this._focusedData)&&this.nodeMap.get(this._focusedData).focus())}_getFirstVisibleNode(){return this._getChildrenList()[0]}_getLastVisibleNode(){let t=this._getChildrenList();return this._getLastChild(t[t.length-1])}_getPreviousVisibleNode(){if(!this._focusedData)return;let t=this.parentMap.get(this._focusedData),i=this.childrenMap.get(t),s=i.indexOf(this._focusedData);if(this.treeControl.isExpanded(this._focusedData)||this._removeChildren(),s===0)return t;if(s>0)return this._getLastChild(i[s-1])}_getNextVisibleNode(){if(!this._focusedData)return;let t=this.treeControl.isExpanded(this._focusedData);if(t||this._removeChildren(),this.childrenMap.has(this._focusedData)&&this.treeControl&&t){let s=this._getChildrenList(this._focusedData);if(s.length)return s[0]}let i=this._focusedData;for(;i;){let s=this.parentMap.get(i),n=this.childrenMap.get(s),o=n.indexOf(i);if(o===n.length-1)i=s;else if(o>-1)return n[o+1]}}_getParentNode(){if(this.parentMap.has(this._focusedData))this._changeFocusedData(this.parentMap.get(this._focusedData));else if(this.treeControl.getLevel){let t=this._getChildrenList(),i=t.indexOf(this._focusedData),s=this.treeControl.getLevel(this._focusedData)-1;if(i<=0)return;for(let n=i-1;n>=0;n--)if(this.treeControl.getLevel(t[n])===s)return t[n]}}_removeChildren(){let t=this.parentMap.get(this._focusedData),i=this._getChildrenList(),s=i.indexOf(this._focusedData),n=this._getNestLevels(i,s);n.forEach(c=>{this.nodeMap.delete(c),this.parentMap.delete(c)});let o=i.filter(c=>!n.includes(c));this.childrenMap.set(t,o)}_getNestLevels(t,i){let s=t[i]?.level,n=[],o=i+1;for(;o<t.length;){let c=t[o];if(c.level<=s)break;n.push(c),o++}return n}_getChildrenList(t){return this.childrenMap.has(t)||this.childrenMap.set(t,[]),this.childrenMap.get(t)}_getLastChild(t){let i=t;for(;i&&this.childrenMap.has(i)&&this.treeControl&&this.treeControl.isExpanded(i);){let s=this._getChildrenList(i);if(s.length)i=s[s.length-1];else break}return i}insertNode(t,i,s,n){super.insertNode(t,i,s,n),l.mostRecentTreeNode&&(this.insertToA11yNodeTracking(i,t,l.mostRecentTreeNode,n),l.mostRecentTreeNode.focus())}renderNodeChanges(t,i=this._dataDiffer,s=this._nodeOutlet.viewContainer,n){super.renderNodeChanges(t,i,s,n);let o=i.diff(t);o&&o.forEachOperation((c,_,f)=>{f==null?this.removeFromA11yNodeTracking(_,n):c.previousIndex!==null&&this.moveInA11yNodeTracking(_,f,n)})}_monitorTreeFocus(){this._focusMonitor.monitor(this._elementRef.nativeElement,!0).pipe(D(this._wrapperOnDestroy)).subscribe(t=>{let i=t?-1:this._userTabIndex||0;this._tabIndex!==i&&(this._tabIndex=i,this._cdr.markForCheck())})}};e.\u0275fac=function(i){return new(i||e)(a(I),a(T),a(Q,8),a(g),a(B))},e.\u0275cmp=M({type:e,selectors:[["nx-tree"]],viewQuery:function(i,s){if(i&1&&R(ge,7),i&2){let n;C(n=N())&&(s._nodeOutlet=n.first)}},hostAttrs:["role","tree",1,"nx-tree","cdk-tree"],hostVars:1,hostBindings:function(i,s){i&1&&F("keydown",function(o){return s._handleKeydown(o)})("focus",function(){return s.focus()}),i&2&&m("tabindex",s._tabIndex)},inputs:{tabIndex:"tabIndex"},exportAs:["nxTree"],features:[x([{provide:u,useExisting:e}]),y],decls:1,vars:0,consts:[["nxTreeNodeOutlet",""]],template:function(i,s){i&1&&L(0,0)},dependencies:[ge],styles:[`:host.nx-tree{display:block}.nx-tree__node{display:block;overflow:hidden}.nx-tree__node.cdk-keyboard-focused{box-shadow:var(--focus-inset-box-shadow);border-radius:8px}@media screen and (forced-colors: active){.nx-tree__node.cdk-keyboard-focused{box-shadow:inset 0 0 0 4px CanvasText,inset 0 0 0 6px background;border:4px solid CanvasText}}
`],encapsulation:2,changeDetection:0});let r=e;return r})(),dt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=w({type:e}),e.\u0275inj=E({imports:[ue,oe]});let r=e;return r})();export{Ne as a,fe as b,pe as c,it as d,st as e,nt as f,rt as g,ot as h,dt as i};
