import{d as qe}from"./chunk-SYH65BCI.js";import{a as Ze,b as Q}from"./chunk-KCNNJE6N.js";import{a as Je,b as X}from"./chunk-E6Q5TXPS.js";import"./chunk-R7Q32E37.js";import{a as Ye,b as Xe,c as Qe,d as G}from"./chunk-HMCFQG7B.js";import{c as He}from"./chunk-TKB75KOA.js";import"./chunk-VV4CBK2G.js";import"./chunk-NWD76NQC.js";import{m as Ke,p as Ge}from"./chunk-SMY75D3Q.js";import{c as Ue,l as We}from"./chunk-HX3VF2ON.js";import{e as Ve}from"./chunk-M2DE53BR.js";import"./chunk-T6V2L5QF.js";import"./chunk-3CPUPH7K.js";import"./chunk-OPZB6HC2.js";import"./chunk-EOEWAY3L.js";import{A as ze,r as je}from"./chunk-PVCVFPWW.js";import{Dc as b,Eb as ce,Gc as Te,Hc as ue,Ic as ae,K as Se,Qb as be,Rb as ke,Rc as C,Sc as Y,Tc as E,Uc as Oe,Wb as z,a as T,ad as $e,bd as Pe,da as De,ea as we,l as Fe,lc as L,m as oe,ma as Ne,na as Le,nc as U,oc as W,pc as K,qc as A,rb as j,rc as f,yb as m}from"./chunk-QFNFGJ3Y.js";function S(t){return Array.isArray?Array.isArray(t):ut(t)==="[object Array]"}var ft=1/0;function gt(t){if(typeof t=="string")return t;let n=t+"";return n=="0"&&1/t==-ft?"-0":n}function xt(t){return t==null?"":gt(t)}function M(t){return typeof t=="string"}function ot(t){return typeof t=="number"}function At(t){return t===!0||t===!1||Ct(t)&&ut(t)=="[object Boolean]"}function ct(t){return typeof t=="object"}function Ct(t){return ct(t)&&t!==null}function v(t){return t!=null}function le(t){return!t.trim().length}function ut(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}var _t="Incorrect 'index' type",Et=t=>`Invalid value for key ${t}`,vt=t=>`Pattern length exceeds max of ${t}.`,yt=t=>`Missing ${t} property in key`,Rt=t=>`Property 'weight' in key '${t}' must be a positive integer`,et=Object.prototype.hasOwnProperty,he=class{constructor(n){this._keys=[],this._keyMap={};let e=0;n.forEach(i=>{let s=at(i);this._keys.push(s),this._keyMap[s.id]=s,e+=s.weight}),this._keys.forEach(i=>{i.weight/=e})}get(n){return this._keyMap[n]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function at(t){let n=null,e=null,i=null,s=1,r=null;if(M(t)||S(t))i=t,n=tt(t),e=de(t);else{if(!et.call(t,"name"))throw new Error(yt("name"));let o=t.name;if(i=o,et.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Rt(o));n=tt(o),e=de(o),r=t.getFn}return{path:n,id:e,weight:s,src:i,getFn:r}}function tt(t){return S(t)?t:t.split(".")}function de(t){return S(t)?t.join("."):t}function It(t,n){let e=[],i=!1,s=(r,o,u)=>{if(v(r))if(!o[u])e.push(r);else{let a=o[u],c=r[a];if(!v(c))return;if(u===o.length-1&&(M(c)||ot(c)||At(c)))e.push(xt(c));else if(S(c)){i=!0;for(let l=0,d=c.length;l<d;l+=1)s(c[l],o,u+1)}else o.length&&s(c,o,u+1)}};return s(t,M(n)?n.split("."):n,0),i?e:e[0]}var Mt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Bt={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,n)=>t.score===n.score?t.idx<n.idx?-1:1:t.score<n.score?-1:1},Ft={location:0,threshold:.6,distance:100},St={useExtendedSearch:!1,getFn:It,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},h=T(T(T(T({},Bt),Mt),Ft),St),Dt=/[^ ]+/g;function wt(t=1,n=3){let e=new Map,i=Math.pow(10,n);return{get(s){let r=s.match(Dt).length;if(e.has(r))return e.get(r);let o=1/Math.pow(r,.5*t),u=parseFloat(Math.round(o*i)/i);return e.set(r,u),u},clear(){e.clear()}}}var V=class{constructor({getFn:n=h.getFn,fieldNormWeight:e=h.fieldNormWeight}={}){this.norm=wt(e,3),this.getFn=n,this.isCreated=!1,this.setIndexRecords()}setSources(n=[]){this.docs=n}setIndexRecords(n=[]){this.records=n}setKeys(n=[]){this.keys=n,this._keysMap={},n.forEach((e,i)=>{this._keysMap[e.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,M(this.docs[0])?this.docs.forEach((n,e)=>{this._addString(n,e)}):this.docs.forEach((n,e)=>{this._addObject(n,e)}),this.norm.clear())}add(n){let e=this.size();M(n)?this._addString(n,e):this._addObject(n,e)}removeAt(n){this.records.splice(n,1);for(let e=n,i=this.size();e<i;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(n,e){return n[this._keysMap[e]]}size(){return this.records.length}_addString(n,e){if(!v(n)||le(n))return;let i={v:n,i:e,n:this.norm.get(n)};this.records.push(i)}_addObject(n,e){let i={i:e,$:{}};this.keys.forEach((s,r)=>{let o=s.getFn?s.getFn(n):this.getFn(n,s.path);if(v(o)){if(S(o)){let u=[],a=[{nestedArrIndex:-1,value:o}];for(;a.length;){let{nestedArrIndex:c,value:l}=a.pop();if(v(l))if(M(l)&&!le(l)){let d={v:l,i:c,n:this.norm.get(l)};u.push(d)}else S(l)&&l.forEach((d,p)=>{a.push({nestedArrIndex:p,value:d})})}i.$[r]=u}else if(M(o)&&!le(o)){let u={v:o,n:this.norm.get(o)};i.$[r]=u}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}};function nt(t,n,{getFn:e=h.getFn,fieldNormWeight:i=h.fieldNormWeight}={}){let s=new V({getFn:e,fieldNormWeight:i});return s.setKeys(t.map(at)),s.setSources(n),s.create(),s}function Nt(t,{getFn:n=h.getFn,fieldNormWeight:e=h.fieldNormWeight}={}){let{keys:i,records:s}=t,r=new V({getFn:n,fieldNormWeight:e});return r.setKeys(i),r.setIndexRecords(s),r}function J(t,{errors:n=0,currentLocation:e=0,expectedLocation:i=0,distance:s=h.distance,ignoreLocation:r=h.ignoreLocation}={}){let o=n/t.length;if(r)return o;let u=Math.abs(i-e);return s?o+u/s:u?1:o}function Lt(t=[],n=h.minMatchCharLength){let e=[],i=-1,s=-1,r=0;for(let o=t.length;r<o;r+=1){let u=t[r];u&&i===-1?i=r:!u&&i!==-1&&(s=r-1,s-i+1>=n&&e.push([i,s]),i=-1)}return t[r-1]&&r-i>=n&&e.push([i,r-1]),e}var O=32;function bt(t,n,e,{location:i=h.location,distance:s=h.distance,threshold:r=h.threshold,findAllMatches:o=h.findAllMatches,minMatchCharLength:u=h.minMatchCharLength,includeMatches:a=h.includeMatches,ignoreLocation:c=h.ignoreLocation}={}){if(n.length>O)throw new Error(vt(O));let l=n.length,d=t.length,p=Math.max(0,Math.min(i,d)),g=r,x=p,_=u>1||a,R=_?Array(d):[],D;for(;(D=t.indexOf(n,x))>-1;){let y=J(n,{currentLocation:D,expectedLocation:p,distance:s,ignoreLocation:c});if(g=Math.min(y,g),x=D+l,_){let w=0;for(;w<l;)R[D+w]=1,w+=1}}x=-1;let F=[],$=1,k=l+d,mt=1<<l-1;for(let y=0;y<l;y+=1){let w=0,N=k;for(;w<N;)J(n,{errors:y,currentLocation:p+N,expectedLocation:p,distance:s,ignoreLocation:c})<=g?w=N:k=N,N=Math.floor((k-w)/2+w);k=N;let Me=Math.max(1,p-N+1),re=o?d:Math.min(p+N,d)+l,P=Array(re+2);P[re+1]=(1<<y)-1;for(let I=re;I>=Me;I-=1){let H=I-1,Be=e[t.charAt(H)];if(_&&(R[H]=+!!Be),P[I]=(P[I+1]<<1|1)&Be,y&&(P[I]|=(F[I+1]|F[I])<<1|1|F[I+1]),P[I]&mt&&($=J(n,{errors:y,currentLocation:H,expectedLocation:p,distance:s,ignoreLocation:c}),$<=g)){if(g=$,x=H,x<=p)break;Me=Math.max(1,2*p-x)}}if(J(n,{errors:y+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:c})>g)break;F=P}let se={isMatch:x>=0,score:Math.max(.001,$)};if(_){let y=Lt(R,u);y.length?a&&(se.indices=y):se.isMatch=!1}return se}function kt(t){let n={};for(let e=0,i=t.length;e<i;e+=1){let s=t.charAt(e);n[s]=(n[s]||0)|1<<i-e-1}return n}var Z=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t,q=class{constructor(n,{location:e=h.location,threshold:i=h.threshold,distance:s=h.distance,includeMatches:r=h.includeMatches,findAllMatches:o=h.findAllMatches,minMatchCharLength:u=h.minMatchCharLength,isCaseSensitive:a=h.isCaseSensitive,ignoreDiacritics:c=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){if(this.options={location:e,threshold:i,distance:s,includeMatches:r,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:c,ignoreLocation:l},n=a?n:n.toLowerCase(),n=c?Z(n):n,this.pattern=n,this.chunks=[],!this.pattern.length)return;let d=(g,x)=>{this.chunks.push({pattern:g,alphabet:kt(g),startIndex:x})},p=this.pattern.length;if(p>O){let g=0,x=p%O,_=p-x;for(;g<_;)d(this.pattern.substr(g,O),g),g+=O;if(x){let R=p-O;d(this.pattern.substr(R),R)}}else d(this.pattern,0)}searchIn(n){let{isCaseSensitive:e,ignoreDiacritics:i,includeMatches:s}=this.options;if(n=e?n:n.toLowerCase(),n=i?Z(n):n,this.pattern===n){let _={isMatch:!0,score:0};return s&&(_.indices=[[0,n.length-1]]),_}let{location:r,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:c,ignoreLocation:l}=this.options,d=[],p=0,g=!1;this.chunks.forEach(({pattern:_,alphabet:R,startIndex:D})=>{let{isMatch:F,score:$,indices:k}=bt(n,_,R,{location:r+D,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:c,includeMatches:s,ignoreLocation:l});F&&(g=!0),p+=$,F&&k&&(d=[...d,...k])});let x={isMatch:g,score:g?p/this.chunks.length:1};return g&&s&&(x.indices=d),x}},B=class{constructor(n){this.pattern=n}static isMultiMatch(n){return it(n,this.multiRegex)}static isSingleMatch(n){return it(n,this.singleRegex)}search(){}};function it(t,n){let e=t.match(n);return e?e[1]:null}var pe=class extends B{constructor(n){super(n)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(n){let e=n===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},me=class extends B{constructor(n){super(n)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(n){let i=n.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,n.length-1]}}},fe=class extends B{constructor(n){super(n)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(n){let e=n.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},ge=class extends B{constructor(n){super(n)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(n){let e=!n.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,n.length-1]}}},xe=class extends B{constructor(n){super(n)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(n){let e=n.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[n.length-this.pattern.length,n.length-1]}}},Ae=class extends B{constructor(n){super(n)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(n){let e=!n.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,n.length-1]}}},ee=class extends B{constructor(n,{location:e=h.location,threshold:i=h.threshold,distance:s=h.distance,includeMatches:r=h.includeMatches,findAllMatches:o=h.findAllMatches,minMatchCharLength:u=h.minMatchCharLength,isCaseSensitive:a=h.isCaseSensitive,ignoreDiacritics:c=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){super(n),this._bitapSearch=new q(n,{location:e,threshold:i,distance:s,includeMatches:r,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(n){return this._bitapSearch.searchIn(n)}},te=class extends B{constructor(n){super(n)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(n){let e=0,i,s=[],r=this.pattern.length;for(;(i=n.indexOf(this.pattern,e))>-1;)e=i+r,s.push([i,e-1]);let o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}},Ce=[pe,te,fe,ge,Ae,xe,me,ee],st=Ce.length,Tt=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ot="|";function $t(t,n={}){return t.split(Ot).map(e=>{let i=e.trim().split(Tt).filter(r=>r&&!!r.trim()),s=[];for(let r=0,o=i.length;r<o;r+=1){let u=i[r],a=!1,c=-1;for(;!a&&++c<st;){let l=Ce[c],d=l.isMultiMatch(u);d&&(s.push(new l(d,n)),a=!0)}if(!a)for(c=-1;++c<st;){let l=Ce[c],d=l.isSingleMatch(u);if(d){s.push(new l(d,n));break}}}return s})}var Pt=new Set([ee.type,te.type]),_e=class{constructor(n,{isCaseSensitive:e=h.isCaseSensitive,ignoreDiacritics:i=h.ignoreDiacritics,includeMatches:s=h.includeMatches,minMatchCharLength:r=h.minMatchCharLength,ignoreLocation:o=h.ignoreLocation,findAllMatches:u=h.findAllMatches,location:a=h.location,threshold:c=h.threshold,distance:l=h.distance}={}){this.query=null,this.options={isCaseSensitive:e,ignoreDiacritics:i,includeMatches:s,minMatchCharLength:r,findAllMatches:u,ignoreLocation:o,location:a,threshold:c,distance:l},n=e?n:n.toLowerCase(),n=i?Z(n):n,this.pattern=n,this.query=$t(this.pattern,this.options)}static condition(n,e){return e.useExtendedSearch}searchIn(n){let e=this.query;if(!e)return{isMatch:!1,score:1};let{includeMatches:i,isCaseSensitive:s,ignoreDiacritics:r}=this.options;n=s?n:n.toLowerCase(),n=r?Z(n):n;let o=0,u=[],a=0;for(let c=0,l=e.length;c<l;c+=1){let d=e[c];u.length=0,o=0;for(let p=0,g=d.length;p<g;p+=1){let x=d[p],{isMatch:_,indices:R,score:D}=x.search(n);if(_){if(o+=1,a+=D,i){let F=x.constructor.type;Pt.has(F)?u=[...u,...R]:u.push(R)}}else{a=0,o=0,u.length=0;break}}if(o){let p={isMatch:!0,score:a/o};return i&&(p.indices=u),p}}return{isMatch:!1,score:1}}},Ee=[];function jt(...t){Ee.push(...t)}function ve(t,n){for(let e=0,i=Ee.length;e<i;e+=1){let s=Ee[e];if(s.condition(t,n))return new s(t,n)}return new q(t,n)}var ne={AND:"$and",OR:"$or"},ye={PATH:"$path",PATTERN:"$val"},Re=t=>!!(t[ne.AND]||t[ne.OR]),zt=t=>!!t[ye.PATH],Ut=t=>!S(t)&&ct(t)&&!Re(t),rt=t=>({[ne.AND]:Object.keys(t).map(n=>({[n]:t[n]}))});function lt(t,n,{auto:e=!0}={}){let i=s=>{let r=Object.keys(s),o=zt(s);if(!o&&r.length>1&&!Re(s))return i(rt(s));if(Ut(s)){let a=o?s[ye.PATH]:r[0],c=o?s[ye.PATTERN]:s[a];if(!M(c))throw new Error(Et(a));let l={keyId:de(a),pattern:c};return e&&(l.searcher=ve(c,n)),l}let u={children:[],operator:r[0]};return r.forEach(a=>{let c=s[a];S(c)&&c.forEach(l=>{u.children.push(i(l))})}),u};return Re(t)||(t=rt(t)),i(t)}function Wt(t,{ignoreFieldNorm:n=h.ignoreFieldNorm}){t.forEach(e=>{let i=1;e.matches.forEach(({key:s,norm:r,score:o})=>{let u=s?s.weight:null;i*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(n?1:r))}),e.score=i})}function Kt(t,n){let e=t.matches;n.matches=[],v(e)&&e.forEach(i=>{if(!v(i.indices)||!i.indices.length)return;let{indices:s,value:r}=i,o={indices:s,value:r};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),n.matches.push(o)})}function Gt(t,n){n.score=t.score}function Vt(t,n,{includeMatches:e=h.includeMatches,includeScore:i=h.includeScore}={}){let s=[];return e&&s.push(Kt),i&&s.push(Gt),t.map(r=>{let{idx:o}=r,u={item:n[o],refIndex:o};return s.length&&s.forEach(a=>{a(r,u)}),u})}var ie=(()=>{class t{constructor(e,i={},s){this.options=T(T({},h),i),this.options.useExtendedSearch,this._keyStore=new he(this.options.keys),this.setCollection(e,s)}setCollection(e,i){if(this._docs=e,i&&!(i instanceof V))throw new Error(_t);this._myIndex=i||nt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){v(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let i=[];for(let s=0,r=this._docs.length;s<r;s+=1){let o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,r-=1,i.push(o))}return i}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:i=-1}={}){let{includeMatches:s,includeScore:r,shouldSort:o,sortFn:u,ignoreFieldNorm:a}=this.options,c=M(e)?M(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Wt(c,{ignoreFieldNorm:a}),o&&c.sort(u),ot(i)&&i>-1&&(c=c.slice(0,i)),Vt(c,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){let i=ve(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:o,i:u,n:a})=>{if(!v(o))return;let{isMatch:c,score:l,indices:d}=i.searchIn(o);c&&r.push({item:o,idx:u,matches:[{score:l,value:o,norm:a,indices:d}]})}),r}_searchLogical(e){let i=lt(e,this.options),s=(a,c,l)=>{if(!a.children){let{keyId:p,searcher:g}=a,x=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return x&&x.length?[{idx:l,item:c,matches:x}]:[]}let d=[];for(let p=0,g=a.children.length;p<g;p+=1){let x=a.children[p],_=s(x,c,l);if(_.length)d.push(..._);else if(a.operator===ne.AND)return[]}return d},r=this._myIndex.records,o={},u=[];return r.forEach(({$:a,i:c})=>{if(v(a)){let l=s(i,a,c);l.length&&(o[c]||(o[c]={idx:c,item:a,matches:[]},u.push(o[c])),l.forEach(({matches:d})=>{o[c].matches.push(...d)}))}}),u}_searchObjectList(e){let i=ve(e,this.options),{keys:s,records:r}=this._myIndex,o=[];return r.forEach(({$:u,i:a})=>{if(!v(u))return;let c=[];s.forEach((l,d)=>{c.push(...this._findMatches({key:l,value:u[d],searcher:i}))}),c.length&&o.push({idx:a,item:u,matches:c})}),o}_findMatches({key:e,value:i,searcher:s}){if(!v(i))return[];let r=[];if(S(i))i.forEach(({v:o,i:u,n:a})=>{if(!v(o))return;let{isMatch:c,score:l,indices:d}=s.searchIn(o);c&&r.push({score:l,key:e,value:o,idx:u,norm:a,indices:d})});else{let{v:o,n:u}=i,{isMatch:a,score:c,indices:l}=s.searchIn(o);a&&r.push({score:c,key:e,value:o,norm:u,indices:l})}return r}}return t.version="7.1.0",t.createIndex=nt,t.parseIndex=Nt,t.config=h,t})();ie.parseQuery=lt;jt(_e);var ht={minMatchCharLength:4,threshold:.6,useExtendedSearch:!0,ignoreLocation:!0,keys:["id","examples","category","title","name","content","alias","directiveSelectors","directiveExportAs"]};var pt=(()=>{class t{init(){return new Promise(e=>{Promise.all([fetch("lib-viewer/fuse-search-index.json"),fetch("lib-viewer/fuse-search-entries.json")]).then(async i=>Promise.all(i.map(s=>s.json()))).then(i=>{let s={index:i[0],entries:i[1]},r=ie.parseIndex(s.index);this.fuse=new ie(s.entries,ht,r),e(!0)})})}search(e){return this.fuse.search(`'${e}`)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=Ne({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Yt(t,n){t&1&&(A(0,"h1",5),C(1,"Initializing search ..."),f())}function Xt(t,n){if(t&1&&(A(0,"div",8)(1,"nx-link")(2,"a",9),C(3),f()(),A(4,"nx-badge",10),C(5),f(),A(6,"div",11),C(7),f()()),t&2){let e=n.$implicit;m(2),ue("href","my-viewer/documentation/",e.item.id,"",j),m(),Y(e.item.title),m(2),E("",e.item.alias," "),m(2),Oe("",e.item.id," ",e.item.category,"")}}function Qt(t,n){if(t&1&&(A(0,"div")(1,"h2"),C(2),f(),W(3,Xt,8,6,"div",8,U),f()),t&2){let e=b(2);m(2),E(" Components (",e.searchResults.component.entries.length<e.searchResults.component.total?e.searchResults.component.entries.length+" of "+e.searchResults.component.total:e.searchResults.component.entries.length,") "),m(),K(e.searchResults.component.entries)}}function Jt(t,n){if(t&1&&(A(0,"span",15),C(1),f()),t&2){let e=b().$implicit;m(),E(" <",e.item.directiveSelectors==null?null:e.item.directiveSelectors.join(","),"> ")}}function Zt(t,n){if(t&1&&(A(0,"div",8)(1,"nx-badge",13),C(2),f(),A(3,"span",14),C(4),f(),A(5,"nx-link")(6,"a",9),C(7),f()(),z(8,Jt,2,1,"span",15),A(9,"div",16),C(10),f()()),t&2){let e=n.$implicit,i=b(3);m(),Te("type",i.getApiBadge(e.item.type)),m(),E("",e.item.type," "),m(2),E(" ",e.item.id," \u25B8 "),m(2),ae("href","my-viewer/documentation/",e.item.id,"/api#",e.item.name,"",j),m(),E(" ",e.item.name," "),m(),L(e.item.directiveSelectors&&(e.item.directiveSelectors!=null&&e.item.directiveSelectors.length)?8:-1),m(2),Y(e.item.title)}}function qt(t,n){if(t&1&&(A(0,"div")(1,"h2",12),C(2),f(),W(3,Zt,11,9,"div",8,U),f()),t&2){let e=b(2);m(2),E(" API (",e.searchResults.api.entries.length<e.searchResults.api.total?e.searchResults.api.entries.length+" of "+e.searchResults.api.total:e.searchResults.api.entries.length,") "),m(),K(e.searchResults.api.entries)}}function en(t,n){if(t&1&&(A(0,"p",8)(1,"nx-link")(2,"a",9),C(3),f()()()),t&2){let e=n.$implicit;m(2),ue("href","my-viewer/guides/",e.item.id,"",j),m(),Y(e.item.title)}}function tn(t,n){if(t&1&&(A(0,"div")(1,"h2",12),C(2),f(),W(3,en,4,3,"p",8,U),f()),t&2){let e=b(2);m(2),E(" Guides (",e.searchResults.guide.entries.length<e.searchResults.guide.total?e.searchResults.guide.entries.length+" of "+e.searchResults.guide.total:e.searchResults.guide.entries.length,") "),m(),K(e.searchResults.guide.entries)}}function nn(t,n){if(t&1&&(A(0,"p",8)(1,"span",14),C(2),f(),C(3," \u25B8 "),A(4,"nx-link")(5,"a",9),C(6),f()()()),t&2){let e=n.$implicit;m(2),E(" ",e.item.module," "),m(3),ae("href","my-viewer/documentation/",e.item.module,"/overview#",e.item.id.split("-").pop(),"",j),m(),E(" ",e.item.title," ")}}function sn(t,n){if(t&1&&(A(0,"div")(1,"h2",12),C(2),f(),W(3,nn,7,5,"p",8,U),f()),t&2){let e=b(2);m(2),E(" Example (",e.searchResults.example.entries.length<e.searchResults.example.total?e.searchResults.example.entries.length+" of "+e.searchResults.example.total:e.searchResults.example.entries.length,") "),m(),K(e.searchResults.example.entries)}}function rn(t,n){if(t&1&&(A(0,"h1",5),C(1),f(),A(2,"div",6),C(3),A(4,"code"),C(5,'"search term"'),f(),C(6,"). "),f(),A(7,"div",7),z(8,Qt,5,1,"div")(9,qt,5,1,"div")(10,tn,5,1,"div")(11,sn,5,1,"div"),f()),t&2){let e=b();m(),E("Results found for '",e.searchTerm,"'"),m(2),E(" We're showing maximum ",e.maxEntriesPerCategory," per category. Use quotation marks to search for a specific group of words (eg. "),m(5),L(!(e.searchResults==null||e.searchResults.component==null||e.searchResults.component.entries==null)&&e.searchResults.component.entries.length?8:-1),m(),L(!(e.searchResults==null||e.searchResults.api==null||e.searchResults.api.entries==null)&&e.searchResults.api.entries.length?9:-1),m(),L(!(e.searchResults==null||e.searchResults.guide==null||e.searchResults.guide.entries==null)&&e.searchResults.guide.entries.length?10:-1),m(),L(!(e.searchResults==null||e.searchResults.example==null||e.searchResults.example.entries==null)&&e.searchResults.example.entries.length?11:-1)}}var Ie=(()=>{class t{set searchInput(e){this._searchInput=e,this.searchChanged$.next(e)}get searchInput(){return this._searchInput}constructor(e,i){this.activeRoute=e,this.fuseSearch=i,this.maxEntriesPerCategory=15,this.searchTerm="",this.initializing=!1,this.initReady$=new oe(!1),this.searchChanged$=new oe(""),this._destroyed=new Fe,this._searchInput=""}ngOnInit(){this.initSearch()}initSearch(){this.initializing=!0,this.fuseSearch.init().then(()=>{this.initReady$.next(!0)}),this.initReady$.pipe(we(this._destroyed),Se(e=>e),De(()=>this.activeRoute.params)).subscribe(e=>{this.searchTerm=e.term,this.searchResults=this.groupResults(this.fuseSearch.search(e.term))})}groupResults(e){let i={};for(let s of e){let r=s.item;if(!i[r?.searchDisplayType])i[r.searchDisplayType]={entries:[],total:0};else if(i[r.searchDisplayType].entries.length===this.maxEntriesPerCategory){i[r.searchDisplayType].total++;continue}i[r.searchDisplayType].entries.push(s),i[r.searchDisplayType].total++}return i}getApiBadge(e){switch(e){case"directive":return"active";case"component":return"positive";case"service":return"critical";case"interface":return"negative";default:return""}}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}static{this.\u0275fac=function(i){return new(i||t)(ce(Ue),ce(pt))}}static{this.\u0275cmp=be({type:t,selectors:[["nxv-search-results"]],inputs:{searchInput:"searchInput"},decls:8,vars:4,consts:[["cdkScrollable",""],["nxLayout","grid maxwidth",1,"search-results__wrapper","nx-grid","nx-grid--max-width"],["nxRow",""],["nxCol","12"],[1,"searchresult__content","documentation__content"],[1,"searchresults__header"],[1,"searchresults__info"],[1,"search-results"],[1,"search-results__entry"],[3,"href"],[1,"nx-margin-left-s"],[1,"nx-margin-bottom-m"],[1,"nx-margin-top-3m"],[1,"nx-margin-right-3xs",3,"type"],[2,"text-transform","capitalize"],[1,"hint"],[1,"nx-margin-bottom-m","nx-margin-top-3xs"]],template:function(i,s){i&1&&(A(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),z(5,Yt,2,0,"h1",5),$e(6,"async"),z(7,rn,12,6),f()()()()()),i&2&&(m(5),L(Pe(6,2,s.initReady$)===!1?5:-1),m(2),L(s.searchTerm?7:-1))},dependencies:[Ke,G,Ye,Xe,Qe,X,Je,Q,Ze,je],styles:["[_nghost-%COMP%]{display:flex;height:100%}main[_ngcontent-%COMP%]{overflow:auto;height:100%;width:100%;display:flex;flex-direction:column}.search-results__wrapper[_ngcontent-%COMP%]{flex:1 0 auto}.searchresults__header[_ngcontent-%COMP%]{margin:20px 0}.searchresults__info[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.0625rem;margin-bottom:30px}.hint[_ngcontent-%COMP%]{opacity:.5;font-style:italic;font-weight:100}"]})}}return t})();var on=[{path:":term",component:Ie}],kn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=ke({type:t})}static{this.\u0275inj=Le({imports:[ze,qe,G,Ge,X,Q,G,Ve,He,We.forChild(on),Ie]})}}return t})();export{kn as SearchResultsModule};
