<nx-accordion>
    <nx-expansion-panel>
        <nx-expansion-panel-header
            [attr.aria-invalid]="infoHasError"
            [attr.aria-describedby]="infoHasError ? 'error_example' : ''"
        >
            <nx-expansion-panel-title>
                <div class="expansion-title-with-icon">
                    @if (infoHasError) {
                    <nx-icon
                        class="nx-error__icon"
                        [name]="'exclamation-triangle'"
                        aria-hidden="true"
                    ></nx-icon>
                    }
                    <span>General Information</span>
                </div>
            </nx-expansion-panel-title>
        </nx-expansion-panel-header>
        <form [formGroup]="formGroupInfo">
            <div nxLayout="grid nogutters">
                <div nxRow>
                    <div nxCol="12,12,12,6,6">
                        <nx-formfield label="Surname">
                            <input
                                required
                                nxInput
                                formControlName="surname"
                                autocomplete="family-name"
                            />
                            <nx-error nxFormfieldError>
                                <strong> Please note: </strong> you have to fill
                                out this field to continue.
                            </nx-error>
                        </nx-formfield>
                    </div>
                </div>
            </div>
        </form>
    </nx-expansion-panel>
    <nx-expansion-panel>
        <nx-expansion-panel-header
            [attr.aria-invalid]="paymentHasError"
            [attr.aria-describedby]="paymentHasError ? 'error_example' : ''"
        >
            <nx-expansion-panel-title>
                <div class="expansion-title-with-icon">
                    @if (paymentHasError) {
                    <nx-icon
                        aria-hidden="true"
                        class="nx-error__icon"
                        [name]="'exclamation-triangle'"
                    ></nx-icon>
                    }
                    <span>Payment details</span>
                </div>
            </nx-expansion-panel-title>
        </nx-expansion-panel-header>
        <form [formGroup]="formGroupPayment">
            <div nxLayout="grid nogutters">
                <div nxRow>
                    <div nxCol="12,12,12,6,6">
                        <nx-formfield label="Label">
                            <input required nxInput formControlName="input" />
                            <nx-error nxFormfieldError>
                                <strong> Please note: </strong> you have to fill
                                out this field to continue.
                            </nx-error>
                        </nx-formfield>
                    </div>
                </div>
            </div>
        </form>
    </nx-expansion-panel>
</nx-accordion>
@if (infoHasError || paymentHasError) {
<nx-message id="error_example" context="error" class="nx-margin-top-xs">
    <strong> Error: </strong> Please check the section containing an error
    marked with a red triangle with an exclamation mark.
</nx-message>
}
